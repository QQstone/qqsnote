<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/qqsnote/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/qqsnote/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/qqsnote/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/qqsnote/images/logo.svg" color="#222">

<link rel="stylesheet" href="/qqsnote/css/main.css">


<link rel="stylesheet" href="/qqsnote/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"qqstone.github.io","root":"/qqsnote/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="QQs&#39;Note">
<meta property="og:url" content="http://qqstone.github.io/qqsnote/page/25/index.html">
<meta property="og:site_name" content="QQs&#39;Note">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="QQs">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://qqstone.github.io/qqsnote/page/25/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>QQs'Note</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/qqsnote/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">QQs'Note</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/qqsnote/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/qqsnote/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://qqstone.github.io/qqsnote/2019/12/26/HelmetJS/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/qqsnote/images/avatar.gif">
      <meta itemprop="name" content="QQs">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="QQs'Note">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/qqsnote/2019/12/26/HelmetJS/" class="post-title-link" itemprop="url">HelmetJS</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-12-26 18:49:54" itemprop="dateCreated datePublished" datetime="2019-12-26T18:49:54+08:00">2019-12-26</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-01-13 19:47:30" itemprop="dateModified" datetime="2020-01-13T19:47:30+08:00">2020-01-13</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://qqstone.github.io/qqsnote/2019/12/26/BasicShell/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/qqsnote/images/avatar.gif">
      <meta itemprop="name" content="QQs">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="QQs'Note">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/qqsnote/2019/12/26/BasicShell/" class="post-title-link" itemprop="url">BasicShell</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-12-26 18:09:49" itemprop="dateCreated datePublished" datetime="2019-12-26T18:09:49+08:00">2019-12-26</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-01-13 19:47:30" itemprop="dateModified" datetime="2020-01-13T19:47:30+08:00">2020-01-13</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/qqsnote/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/" itemprop="url" rel="index"><span itemprop="name">编程语言</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://qqstone.github.io/qqsnote/2019/12/23/MySQLStoredProcedure/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/qqsnote/images/avatar.gif">
      <meta itemprop="name" content="QQs">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="QQs'Note">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/qqsnote/2019/12/23/MySQLStoredProcedure/" class="post-title-link" itemprop="url">MySQL 存储过程</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-12-23 16:18:01" itemprop="dateCreated datePublished" datetime="2019-12-23T16:18:01+08:00">2019-12-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-09-06 07:56:25" itemprop="dateModified" datetime="2020-09-06T07:56:25+08:00">2020-09-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/qqsnote/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/" itemprop="url" rel="index"><span itemprop="name">数据库</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h3><blockquote>
<p>存储过程（Stored Procedure）是一种在数据库中存储复杂程序，以便外部程序调用的一种数据库对象。<br><br>存储过程是为了完成特定功能的SQL语句集，经编译创建并保存在数据库中，用户可通过指定存储过程的名字并给定参数(需要时)来调用执行。<br><br>存储过程思想上很简单，就是数据库 SQL 语言层面的代码封装与重用。</p>
</blockquote>
<ul>
<li>存储过程可封装，并隐藏复杂的商业逻辑。<br><br>当dba与后台开发分离时，代码将以call xStoredProcedure 的形式访问数据库</li>
<li>存储过程可以回传值，并可以接受参数。</li>
<li>存储过程，往往定制化于特定的数据库上，因为支持的编程语言不同。当切换到其他厂商的数据库系统时，需要重写原有的存储过程。<h4 id="使用存储过程-or-使用-DAO-SQL"><a href="#使用存储过程-or-使用-DAO-SQL" class="headerlink" title="使用存储过程 or 使用 DAO SQL"></a>使用存储过程 or 使用 DAO SQL</h4>Stored Procedure|DAO SQL<br>:——-|:——<br>数据操作与底层业务解耦，以提供多方使用|不同服务做类似查询需要各自实现<br>版本控制与代码分离|一致地版本控制<br>仅需开发select和execuate权限|底层应用掌握较高地数据库权限<br>增加了数据库运算压力|<br>无法应对分表等业务扩展|扩展灵活<br>数据库层面拼接查询或无法使用到索引|<br>法国人说，使用存储过程封装数据操作主要是因为第一条地目的，然而私以为解耦数据操作和业务的话添加基础服务或中间件更好一些<h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h3><h4 id="0-语句结构"><a href="#0-语句结构" class="headerlink" title="0 语句结构"></a>0 语句结构</h4>修改语句结束符，从分号 ; 临时改为两个 $$，使得过程体中使用的分号被直接传递到服务器，而不会被客户端（如mysql）解释。<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DELIMITER $$</span><br><span class="line">或</span><br><span class="line">DELIMITER &#x2F;&#x2F;</span><br></pre></td></tr></table></figure>
过程体，类似其他变成语言中{语句块}<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">BEGIN .... END    </span><br></pre></td></tr></table></figure>
<h4 id="1-变量"><a href="#1-变量" class="headerlink" title="1 变量"></a>1 变量</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-- 存储过程变量，只能在存储过程定义中使用</span><br><span class="line">DECLARE l_int int unsigned default 4000000; </span><br><span class="line">-- 用户变量，可以在会话任意位置使用</span><br><span class="line">SET @p_in&#x3D;1  </span><br><span class="line">SELECT &#39;Hello World&#39; into @x;</span><br></pre></td></tr></table></figure>
赋值多个变量<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select col1, col2, col3 into a, b, c from t limit 1;</span><br></pre></td></tr></table></figure>
<h4 id="2-函数"><a href="#2-函数" class="headerlink" title="2 函数"></a>2 函数</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="3-入参出参"><a href="#3-入参出参" class="headerlink" title="3 入参出参"></a>3 入参出参</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">CREATE PROCEDURE 存储过程名([[IN |OUT |INOUT ] 参数名 数据类形...])</span><br><span class="line"></span><br><span class="line">set @p_in&#x3D;1;</span><br><span class="line">-- 假设STOREDPROCEDURE1是带一个入参的存储过程</span><br><span class="line">call STOREDPROCEDURE1(@p_in);</span><br><span class="line">-- 入参可以是字面量</span><br><span class="line">call STOREDPROCEDURE1(1); </span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="条件分支"><a href="#条件分支" class="headerlink" title="条件分支"></a>条件分支</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">if a&gt;b then</span><br><span class="line">select a;</span><br><span class="line">else</span><br><span class="line">select b;</span><br><span class="line">end if;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">case type</span><br><span class="line">when 0 then</span><br><span class="line">insert into t values(101);</span><br><span class="line">when 1 then</span><br><span class="line">insert into t values(11);</span><br><span class="line">else</span><br><span class="line">insert into t values(1);</span><br><span class="line">end case</span><br></pre></td></tr></table></figure>
<h4 id="循环"><a href="#循环" class="headerlink" title="循环"></a>循环</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">while i&lt;10 do</span><br><span class="line">insert into t values(i)</span><br><span class="line">end while</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">set v&#x3D;0;  </span><br><span class="line">LOOP_LABLE:loop  </span><br><span class="line">insert into t values(v);  </span><br><span class="line">set v&#x3D;v+1;  </span><br><span class="line">if v &gt;&#x3D;5 then </span><br><span class="line">leave LOOP_LABLE;  </span><br><span class="line">end if;  </span><br><span class="line">end loop;  </span><br></pre></td></tr></table></figure>
<h4 id="游标"><a href="#游标" class="headerlink" title="游标"></a>游标</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">create procedure asset_owner_clean()</span><br><span class="line">begin</span><br><span class="line">declare _id int; -- asset list primary key</span><br><span class="line">declare targetid int; -- target user employee ID</span><br><span class="line">declare asset_owner varchar(80);</span><br><span class="line">declare asset_ownerid int;</span><br><span class="line">declare done int default false;</span><br><span class="line">-- set cursor traverse asset list whose owner is not null</span><br><span class="line">declare asset cursor for </span><br><span class="line">(select asset_id,owner,owner_id from all_asset where </span><br><span class="line">(owner is not null and owner &lt;&gt;&#39;&#39;) or (owner_id is not null and owner_id &lt;&gt;&#39;&#39;));</span><br><span class="line"></span><br><span class="line">declare continue handler for not found set done &#x3D; true;</span><br><span class="line">open asset;</span><br><span class="line">checkloop: loop</span><br><span class="line">fetch asset into _id,asset_owner,asset_ownerid;</span><br><span class="line">SELECT _id, asset_owner, asset_ownerid;</span><br><span class="line">if done then</span><br><span class="line">leave checkloop;</span><br><span class="line">end if;</span><br><span class="line">-- loop body start</span><br><span class="line">&lt;insert statements&gt;</span><br><span class="line">-- loop body end</span><br><span class="line">end loop checkloop;</span><br><span class="line">close asset;</span><br><span class="line">commit;</span><br><span class="line">end</span><br></pre></td></tr></table></figure>
注意：跳出循环的句柄是not found，意味着循环体中将empty set赋值给变量会跳出loop<br><br>如 selete * into _list where 1=2;</li>
</ul>
<p>SQL Server中调用存储过程的语法稍有不同, 见文章<a href="/qqsnote/2020/05/19/TransactSQL/" title="TransactSQL">TransactSQL</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://qqstone.github.io/qqsnote/2019/12/20/Https/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/qqsnote/images/avatar.gif">
      <meta itemprop="name" content="QQs">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="QQs'Note">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/qqsnote/2019/12/20/Https/" class="post-title-link" itemprop="url">Https</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-12-20 13:22:21" itemprop="dateCreated datePublished" datetime="2019-12-20T13:22:21+08:00">2019-12-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-03-02 20:11:18" itemprop="dateModified" datetime="2025-03-02T20:11:18+08:00">2025-03-02</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/qqsnote/categories/%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE/" itemprop="url" rel="index"><span itemprop="name">通信协议</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <ul>
<li>https本身没有端口限制</li>
<li>https支持传输ssl证书以避免服务端仿冒</li>
<li>https报文使用对称加密 密钥包含在证书中</li>
</ul>
<p>postman的”验证ssl证书”开关： settings -&gt; General -&gt; SSL certificate verification </p>
<h4 id="ssl-certificate-warning"><a href="#ssl-certificate-warning" class="headerlink" title="ssl certificate warning"></a>ssl certificate warning</h4><p><img src="https://i0.wp.com/tvax4.sinaimg.cn/large/a60edd42gy1gqugoxo311j20qs0s70ue.jpg" alt="ssl warning"></p>
<ul>
<li>SSL证书不是来自公认的证书颁发机构(CA)</li>
<li>数字证书信任链配置错误</li>
<li>证书的域名匹配程度不完整</li>
<li>证书已经过了有效期</li>
<li>客户端不支持SNI协议<br>由于第一条，开发环境的带自签名的https服务仅被本地认证，远程访问就会出现warning</li>
</ul>
<h4 id="生成自签名证书"><a href="#生成自签名证书" class="headerlink" title="生成自签名证书"></a>生成自签名证书</h4><h4 id="信任证书"><a href="#信任证书" class="headerlink" title="信任证书"></a>信任证书</h4><p><a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903848750874632">实现局域网访问HTTPS</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://qqstone.github.io/qqsnote/2019/12/17/DockerVolume/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/qqsnote/images/avatar.gif">
      <meta itemprop="name" content="QQs">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="QQs'Note">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/qqsnote/2019/12/17/DockerVolume/" class="post-title-link" itemprop="url">卷和持久化数据</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-12-17 16:08:15" itemprop="dateCreated datePublished" datetime="2019-12-17T16:08:15+08:00">2019-12-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-06-16 21:02:49" itemprop="dateModified" datetime="2021-06-16T21:02:49+08:00">2021-06-16</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/qqsnote/categories/%E5%AE%B9%E5%99%A8/" itemprop="url" rel="index"><span itemprop="name">容器</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <blockquote>
<p>数据分为持久化和非持久化两类。对于容器，非持久化数据从属其容器，生命周期与容器相同，删除容器时也会删除所有非持久化数据。如果希望自己的容器数据保存下来，需要将数据存储在卷上，卷与容器是解耦的，可以独立地创建并管理。</p>
</blockquote>
<p>在主机上创建Docker的卷，实质上是创建一个目录，使之能且只能被Docker进程修改，除了‘卷’，可使用绑定装载的方式在主机和容器间<b>共享文件</b></p>
<h4 id="卷命令"><a href="#卷命令" class="headerlink" title="卷命令"></a>卷命令</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker volume create myvol</span><br><span class="line">docker volume ls &#x2F;&#x2F; 查看已创建地卷</span><br><span class="line">docker volume inspect myvol &#x2F;&#x2F; 查看指定卷详细信息</span><br><span class="line">docker volume rm myvol &#x2F;&#x2F; 删除指定卷</span><br><span class="line">docker volume prune &#x2F;&#x2F; 删除所有未装入容器使用的卷</span><br></pre></td></tr></table></figure>
<h4 id="装入容器"><a href="#装入容器" class="headerlink" title="装入容器"></a>装入容器</h4><p>-v, —volume<br><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --name myjenkins -p 8080:8080 -p 50000:50000 -v &#x2F;var&#x2F;jenkins_home:&#x2F;var&#x2F;jenkins_home --restart always jenkins</span><br></pre></td></tr></table></figure><br>用:分隔的3个field，卷名称 : 路径或文件 : 选项，通常只保留卷路径<br><br>ro 即 readonly<br><br>原文：</p>
<blockquote>
<p>In the case of named volumes, the first field is the name of the volume, and is unique on a given host machine. For anonymous volumes, the first field is omitted.<br><br>The second field is the path where the file or directory will be mounted in the container.<br><br>The third field is optional, and is a comma-separated list of options, such as ro.</p>
</blockquote>
<p>上例中，-v /var/jenkins_home:/var/jenkins_home 两个field前者是宿主路径，后者是容器路径，即将jenkins用户数据保存到容器的/var/jenkins_home同时持久化到本地位于/var/jenkins_home的卷中</p>
<p>引述 <a target="_blank" rel="noopener" href="https://jenkins.io/doc/book/installing/#downloading-and-running-jenkins-in-docker">jenkins官网</a></p>
<blockquote>
<p>-v $HOME/jenkins:/var/jenkins_home would map the container’s /var/jenkins_home directory to the jenkins subdirectory within the $HOME directory on your local machine, which would typically be /Users/<your-username>/jenkins or /home/<your-username>/jenkins.</p>
</blockquote>
<p>—mount<br><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker run --name myjenkins -p 8080:8080 -p 50000:50000 \ </span><br><span class="line">--mount source&#x3D;jenkins_home,target&#x3D;&#x2F;var&#x2F;jenkins_home,driver&#x3D;local --restart always jenkins</span><br></pre></td></tr></table></figure><br>用 , 分隔三个字段，卷名称，目标路径或文件，驱动。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://qqstone.github.io/qqsnote/2019/12/12/MQ/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/qqsnote/images/avatar.gif">
      <meta itemprop="name" content="QQs">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="QQs'Note">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/qqsnote/2019/12/12/MQ/" class="post-title-link" itemprop="url">MQ中间件</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-12-12 13:22:43" itemprop="dateCreated datePublished" datetime="2019-12-12T13:22:43+08:00">2019-12-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-04-16 20:11:32" itemprop="dateModified" datetime="2022-04-16T20:11:32+08:00">2022-04-16</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/qqsnote/categories/%E4%B8%AD%E9%97%B4%E4%BB%B6/" itemprop="url" rel="index"><span itemprop="name">中间件</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>B站教程 <a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1Dt411g7WB">RabbitMQ</a></p>
<h4 id="意义"><a href="#意义" class="headerlink" title="意义"></a>意义</h4><ul>
<li>异步处理<br>例如 注册—保存成功—发送邮件 的流程，MQ接管非必要操作，拓展并行处理能力</li>
<li>应用解耦<br>使用发布订阅模式，消息上下游之间解除依赖关系</li>
<li>流量削峰<br>秒杀业务，前端请求塞到MQ，将筛选过的action选择性地交给biz层(业务层)</li>
<li>日志处理<h4 id="Message-Queue"><a href="#Message-Queue" class="headerlink" title="Message Queue"></a>Message Queue</h4><blockquote>
<p>RabbitMQ is one of the most popular open source message brokers. RabbitMQ is lightweight and easy to deploy on premises and in the cloud. It supports multiple messaging protocols.</p>
</blockquote>
</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/Erlang">Erlang</a>，具备函數語言特色的程序设计语言</p>
<h4 id="installation"><a href="#installation" class="headerlink" title="installation"></a>installation</h4><p>RPM Manual：<br>(Erlang依赖 + RabbitMQ)<br><a target="_blank" rel="noopener" href="https://www.rabbitmq.com/install-rpm.html#package-dependencies">参考官网 Tutorials</a></p>
<ul>
<li>Before installing RabbitMQ, you must install a supported version of Erlang/OTP. <a target="_blank" rel="noopener" href="https://github.com/rabbitmq/erlang-rpm/releases">Zero-dependency Erlang RPM for RabbitMQ</a> : this is a (virtually) zero dependency 64-bit Erlang RPM package that provides just enough to run RabbitMQ. It may be easier to install than other Erlang RPMs in most environments. It may or may not be suitable for running other Erlang-based software or 3rd party RabbitMQ plugins.</li>
<li>other dependencies : <a target="_blank" rel="noopener" href="https://pkgs.org/download/socat">socat</a>, <a target="_blank" rel="noopener" href="https://pkgs.org/download/logrotate">logrotate</a></li>
<li>download and install rabbit-server.rpm(<a target="_blank" rel="noopener" href="https://www.rabbitmq.com/install-rpm.html#downloads">https://www.rabbitmq.com/install-rpm.html#downloads</a>)</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cd &#x2F;usr&#x2F;local&#x2F;src&#x2F;</span><br><span class="line">mkdir rabbitmq</span><br><span class="line">cd rabbitmq</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>在ubuntu<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;bin&#x2F;sh</span><br><span class="line"></span><br><span class="line">sudo apt-get install curl gnupg debian-keyring debian-archive-keyring apt-transport-https -y</span><br><span class="line"></span><br><span class="line">## Team RabbitMQ&#39;s main signing key</span><br><span class="line">sudo apt-key adv --keyserver &quot;hkps:&#x2F;&#x2F;keys.openpgp.org&quot; --recv-keys &quot;0x0A9AF2115F4687BD29803A206B73A36E6026DFCA&quot;</span><br><span class="line">## Cloudsmith: modern Erlang repository</span><br><span class="line">curl -1sLf https:&#x2F;&#x2F;dl.cloudsmith.io&#x2F;public&#x2F;rabbitmq&#x2F;rabbitmq-erlang&#x2F;gpg.E495BB49CC4BBE5B.key | sudo apt-key add -</span><br><span class="line">## Cloudsmith: RabbitMQ repository</span><br><span class="line">curl -1sLf https:&#x2F;&#x2F;dl.cloudsmith.io&#x2F;public&#x2F;rabbitmq&#x2F;rabbitmq-server&#x2F;gpg.9F4587F226208342.key | sudo apt-key add -</span><br><span class="line"></span><br><span class="line">## Add apt repositories maintained by Team RabbitMQ</span><br><span class="line">sudo tee &#x2F;etc&#x2F;apt&#x2F;sources.list.d&#x2F;rabbitmq.list &lt;&lt;EOF</span><br><span class="line">## Provides modern Erlang&#x2F;OTP releases</span><br><span class="line">##</span><br><span class="line">deb https:&#x2F;&#x2F;dl.cloudsmith.io&#x2F;public&#x2F;rabbitmq&#x2F;rabbitmq-erlang&#x2F;deb&#x2F;ubuntu bionic main</span><br><span class="line">deb-src https:&#x2F;&#x2F;dl.cloudsmith.io&#x2F;public&#x2F;rabbitmq&#x2F;rabbitmq-erlang&#x2F;deb&#x2F;ubuntu bionic main</span><br><span class="line"></span><br><span class="line">## Provides RabbitMQ</span><br><span class="line">##</span><br><span class="line">deb https:&#x2F;&#x2F;dl.cloudsmith.io&#x2F;public&#x2F;rabbitmq&#x2F;rabbitmq-server&#x2F;deb&#x2F;ubuntu bionic main</span><br><span class="line">deb-src https:&#x2F;&#x2F;dl.cloudsmith.io&#x2F;public&#x2F;rabbitmq&#x2F;rabbitmq-server&#x2F;deb&#x2F;ubuntu bionic main</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line">## Update package indices</span><br><span class="line">sudo apt-get update -y</span><br><span class="line"></span><br><span class="line">## Install Erlang packages</span><br><span class="line">sudo apt-get install -y erlang-base \</span><br><span class="line">                        erlang-asn1 erlang-crypto erlang-eldap erlang-ftp erlang-inets \</span><br><span class="line">                        erlang-mnesia erlang-os-mon erlang-parsetools erlang-public-key \</span><br><span class="line">                        erlang-runtime-tools erlang-snmp erlang-ssl \</span><br><span class="line">                        erlang-syntax-tools erlang-tftp erlang-tools erlang-xmerl</span><br><span class="line"></span><br><span class="line">## Install rabbitmq-server and its dependencies</span><br><span class="line">sudo apt-get install rabbitmq-server -y --fix-missing</span><br></pre></td></tr></table></figure></p>
<ul>
<li>启动/关闭 /sbin/service rabbitmq-server start/stop</li>
<li>开机启动 chkconfig rabbitmq-server on</li>
</ul>
<p>Docker Image<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker pull rabbitmq</span><br><span class="line">docker run -it --rm --name rabbitmq -p 5672:5672 -p 15672:15672 rabbitmq:3-management</span><br></pre></td></tr></table></figure><br>启用Management Plugin (网页管理界面)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo rabbitmq-plugins enable rabbitmq_management</span><br><span class="line">sudo service rabbitmq-server restart</span><br><span class="line"># 创建网页管理用户</span><br><span class="line">sudo rabbitmqctl add_user QQs 123456</span><br><span class="line">sudo rabbitmqctl set_user_tags QQs administrator</span><br></pre></td></tr></table></figure><br>访问 <a target="_blank" rel="noopener" href="http://{node-hostname}:15672/">http://{node-hostname}:15672/</a> 对RabbitMQ-Server进行可视化管理 </p>
<h4 id="授权，认证-以及-Access-Control"><a href="#授权，认证-以及-Access-Control" class="headerlink" title="授权，认证 以及 Access Control"></a>授权，认证 以及 Access Control</h4><p><a target="_blank" rel="noopener" href="https://www.rabbitmq.com/access-control.html">参考官网 Tutorials</a></p>
<p>默认用户guest/guest只被允许本地登录<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 创建用户qqs&#x2F;pass1234</span><br><span class="line">sudo rabbitmqctl add_user qqs pass1234</span><br><span class="line">&#x2F;&#x2F; 用户列表</span><br><span class="line">sudo rabbitmqctl list_users</span><br><span class="line">&#x2F;&#x2F; 授权管理员</span><br><span class="line">sudo rabbitmqctl set_user_tags qqs administrator</span><br></pre></td></tr></table></figure><br>vhost 是 RabbitMQ 控制权限的最小粒度<br>注意，/是默认的vhost，缺省了名称。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">rabbitmqctl list_vhosts</span><br><span class="line">rabbitmqctl add_vhost test_vhost</span><br><span class="line">&#x2F;&#x2F; set_permissions [-p &lt;vhost&gt;] &lt;user&gt; &lt;conf&gt; &lt;write&gt; &lt;read&gt;</span><br><span class="line">rabbitmqctl set_permissions -p &#x2F;          qqs &quot;.*&quot; &quot;.*&quot; &quot;.*&quot;</span><br><span class="line">rabbitmqctl set_permissions -p test_host  qqs &quot;.*&quot; &quot;.*&quot; &quot;.*&quot;</span><br></pre></td></tr></table></figure></p>
<h4 id="client-demos"><a href="#client-demos" class="headerlink" title="client demos"></a>client demos</h4><p>见 Github <a target="_blank" rel="noopener" href="https://github.com/rabbitmq/rabbitmq-tutorials">rabbitmq tutorials</a></p>
<p>javascript client demo：<br><br>package<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i amqplib</span><br></pre></td></tr></table></figure><br>send.js<br><figure class="highlight plain"><figcaption><span>node</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">var amqp &#x3D; require(&#39;amqplib&#x2F;callback_api&#39;);</span><br><span class="line"></span><br><span class="line">amqp.connect(&#39;amqp:&#x2F;&#x2F;qqs:pass1234@111.111.111.111:5672&#x2F;&#39;, function(error0, connection) &#123;</span><br><span class="line">    if (error0) &#123;</span><br><span class="line">        throw error0;</span><br><span class="line">    &#125;</span><br><span class="line">    connection.createChannel(function(error1, channel) &#123;</span><br><span class="line">        if (error1) &#123;</span><br><span class="line">            throw error1;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        var queue &#x3D; &#39;hello&#39;;</span><br><span class="line">        var msg &#x3D; &#39;Hello World!&#39;;</span><br><span class="line">        &#x2F;&#x2F; 订阅</span><br><span class="line">        channel.assertQueue(queue, &#123;</span><br><span class="line">            durable: false</span><br><span class="line">        &#125;);</span><br><span class="line">        &#x2F;&#x2F; 发布</span><br><span class="line">        channel.sendToQueue(queue, Buffer.from(msg));</span><br><span class="line"></span><br><span class="line">        console.log(&quot; [x] Sent %s&quot;, msg);</span><br><span class="line">    &#125;);</span><br><span class="line">    setTimeout(function() &#123;</span><br><span class="line">        connection.close();</span><br><span class="line">        process.exit(0);</span><br><span class="line">    &#125;, 500);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>receive.js<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;usr&#x2F;bin&#x2F;env node</span><br><span class="line"></span><br><span class="line">var amqp &#x3D; require(&#39;amqplib&#x2F;callback_api&#39;);</span><br><span class="line"></span><br><span class="line">amqp.connect(&#39;amqp:&#x2F;&#x2F;qqs:pass1234@111.111.111.111:5672&#x2F;&#39;, function(error0, connection) &#123;</span><br><span class="line">    if (error0) &#123;</span><br><span class="line">        throw error0;</span><br><span class="line">    &#125;</span><br><span class="line">    connection.createChannel(function(error1, channel) &#123;</span><br><span class="line">        if (error1) &#123;</span><br><span class="line">            throw error1;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        var queue &#x3D; &#39;hello&#39;;</span><br><span class="line"></span><br><span class="line">        channel.assertQueue(queue, &#123;</span><br><span class="line">            durable: false</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        console.log(&quot; [*] Waiting for messages in %s. To exit press CTRL+C&quot;, queue);</span><br><span class="line"></span><br><span class="line">        channel.consume(queue, function(msg) &#123;</span><br><span class="line">            console.log(&quot; [x] Received %s&quot;, msg.content.toString());</span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            noAck: true</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<h4 id="定时任务"><a href="#定时任务" class="headerlink" title="定时任务"></a>定时任务</h4><p>原理是：消息设置过期时间放入队列1，过期移入队列2，订阅者监听队列2</p>
<h4 id="AMQP"><a href="#AMQP" class="headerlink" title="AMQP"></a>AMQP</h4><p>高级消息队列协议(Advanced Message Queue Protocol) AMQP实体：队列、交换机、绑定<br><img src="https://tva1.sinaimg.cn/large/0032xJMSgy1gt2gjuwp1xj60jg094q4o02.jpg" alt=""></p>
<ul>
<li>默认交换机 根据消息携带的route key直接路由到同名的队列</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://qqstone.github.io/qqsnote/2019/12/09/OAuth2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/qqsnote/images/avatar.gif">
      <meta itemprop="name" content="QQs">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="QQs'Note">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/qqsnote/2019/12/09/OAuth2/" class="post-title-link" itemprop="url">OAuth</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-12-09 10:39:14" itemprop="dateCreated datePublished" datetime="2019-12-09T10:39:14+08:00">2019-12-09</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-03-02 20:11:18" itemprop="dateModified" datetime="2025-03-02T20:11:18+08:00">2025-03-02</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/qqsnote/categories/%E5%8D%8F%E8%AE%AE%E5%92%8C%E8%A7%84%E8%8C%83/" itemprop="url" rel="index"><span itemprop="name">协议和规范</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h4><p>某年月日开发AMS系统，使用公司SSO服务提供的账号密码，用户在AMS前端登录页填写账号密码，AMS后台有记录post请求的requestbody的功能，于是我得到了用户的SSO账号密码。。。</p>
<p>对于本AMS系统，应视为使用第三方账号登录，类似使用wechat或github账号登录，点击入口后弹出第三方页面，通过彼系统认证返回客户端（browser）授权码，本系统凭此授权码访问与第三方有关的资源，通常可能只是从第三方获取用户名、头像、邮箱来填充本系统的个人信息识别.<br><img src="https://i0.wp.com/tvax1.sinaimg.cn/large/a60edd42gy1g9twfy9pmzj20ud0l8ab4.jpg" alt="stacklogin"></p>
<p><img src="https://i0.wp.com/tvax1.sinaimg.cn/large/a60edd42gy1g9twgcmpxij20ue0l775l.jpg" alt="gitlogin"></p>
<p><del>此外在CS Scanflow登录Cloud地模块中，设计期望以账密登录后返回两个token，其中A是访问Cloud相关资源地凭据，B是保持登录(Remember me)需要token，当A过期时，调用接口，Cloud认证B合法，返回新的A，即可在后续使用A继续访问Cloud资源。</del></p>
<h4 id="OpenID"><a href="#OpenID" class="headerlink" title="OpenID"></a>OpenID</h4><p>OpenID 去中心化的身份识别框架，根据协议，任何网站可以作为identity provider，通过一串 URI 向某个网站证明用户的身份。</p>
<h4 id="OAuth标准"><a href="#OAuth标准" class="headerlink" title="OAuth标准"></a>OAuth标准</h4><blockquote>
<p>OAuth在”客户端(受限资源/服务请求方)”与”服务提供商”之间，设置了一个授权层（authorization layer）。”客户端”不能直接登录”服务提供商”，只能登录授权层，使用授权层颁发的令牌（token），访问服务提供商的资源。用户注册在服务端的账户密码，不会暴露给客户端。服务提供商可以自由限制授权层令牌的权限范围和有效期。<br><br>QQs：OAuth不强调认证，它是一个授权协议，实现的是支持由第三方提供授权访问的标准。</p>
<h4 id="OIDC"><a href="#OIDC" class="headerlink" title="OIDC"></a>OIDC</h4><p>OpenID Connect 基于OAuth 2.0协议之上的简单身份层，它允许客户端根据授权服务器的认证结果最终确认终端用户的身份，以及获取基本的用户信息；它支持包括Web、移动、JavaScript在内的所有客户端类型去请求和接收终端用户信息和身份认证会话信息；它是可扩展的协议，允许你使用某些可选功能，如身份数据加密、OpenID提供商发现、会话管理等。</p>
<h4 id="授权方式"><a href="#授权方式" class="headerlink" title="授权方式"></a>授权方式</h4><h5 id="授权码（authorization-code）"><a href="#授权码（authorization-code）" class="headerlink" title="授权码（authorization code）"></a>授权码（authorization code）</h5><p>上文已提到的使用第三方登录的方式即授权码方式，授权码方式是最常用且靠谱的授权方式，相比之下，其余三种比较扯淡。<br><br>下图中A.com实为客户端，如某电商平台，B.com为用户信息持有方，如某社交平台(包含了受限数据服务以及授权服务)，经过对接A.com可以通过如图的流程使用B.com的用户登录<br><img src="https://i0.wp.com/tvax4.sinaimg.cn/large/a60edd42gy1g9twsgu7ksj20m80cijrk.jpg" alt="authcodemode"></p>
<ol>
<li>跳转到B授权页</li>
<li>确认授权，重定向回A，并带回authorization code</li>
<li>向B请求访问受限数据，传递A身份，以及授权码</li>
<li>请求返回可访问受限数据令牌<h5 id="隐藏式（隐式授权）"><a href="#隐藏式（隐式授权）" class="headerlink" title="隐藏式（隐式授权）"></a>隐藏式（隐式授权）</h5>直接返回令牌，安全风险较高 <sup><a target="_blank" rel="noopener" href="http://www.ruanyifeng.com/blog/2019/04/oauth-grant-types.html">注1</a></sup><h5 id="密码式"><a href="#密码式" class="headerlink" title="密码式"></a>密码式</h5>返回账号密码，A以此申请访问B的令牌，风险更高。(私以为，既然B予以这种信任，即将访问权限控制让与A，A可以直接以账密登录B而不用可能受限的token)<h5 id="凭据式"><a href="#凭据式" class="headerlink" title="凭据式"></a>凭据式</h5>对于没有前端的命令行应用，以get请求，用query parameters传参直接得到令牌。<h4 id="前后端分离的SSO"><a href="#前后端分离的SSO" class="headerlink" title="前后端分离的SSO"></a>前后端分离的SSO</h4><img src="https://i0.wp.com/tvax3.sinaimg.cn/large/a60edd42gy1ggrgt64oe1j20p60mywgl.jpg" alt="互联网图片侵删"><h4 id="关于OAuth-OpenId-OIDC什么的"><a href="#关于OAuth-OpenId-OIDC什么的" class="headerlink" title="关于OAuth, OpenId, OIDC什么的"></a>关于OAuth, OpenId, OIDC什么的</h4>网上有文章说OAuth是authorization， OpenId是authentication，这听起来很谜。。<br>OpenID是一个去中心化的网上身份认证系统。（维基百科）</li>
</ol>
</blockquote>
<p>所谓认证系统，解决的是”你是谁”的问题，用户在在identity provider（idp）的服务上注册，客户端登录即去idp获取OpenID标识对应的token，服务提供者校验身份，是拿客户端的token去idp确认。<br>OIDC（OpenID Connect）OpenID + OAuth2.0认证（授权访问）服务<br><img src="https://i0.wp.com/tvax3.sinaimg.cn/large/a60edd42gy1gh5i7z0q6bj20e808jwfe.jpg" alt=""></p>
<blockquote>
<p>access token 是客户端和资源服务器之间的凭据</p>
</blockquote>
<p>那access token在资源服务器上是如何验证的呢？每个请求过来，资源服务器都会拿access token到SSO上去核对吗？</p>
<p>事实上是不一定的。以JWT为例。如果Access Token是JWT形式签发，资源服务可以使用验证签名的方式判断是否合法，只需要把签名密钥在资源服务同步一份即可。典型的是使用非对称加密（见<a href="/qqsnote/2019/07/19/Encryption/" title="加密">加密</a>篇），资源服务保留一份公钥，access token由授权服务使用私钥签发，资源服务是可以对其进行校验的。JWT允许携带一些信息，如用户，权限，有效期等，因此资源服务判断JWT合法之后可以继续根据携带信息来判断是否可访问资源。这样就有可以快速验证有效性，不需要频繁访问授权服务的优点，缺点是Access Token一旦签发，将很难收回，只能通过过期来失效。</p>
<h4 id="access-token-id-token-refresh-token"><a href="#access-token-id-token-refresh-token" class="headerlink" title="access token, id token, refresh token"></a>access token, id token, refresh token</h4><p>在Google，微博等认证门户登录成功后 颁发id token， 表示该账户通过认证， 是可以被信赖的， id token中包含用户的名字，邮箱等信息，可以个性化用户体验（personalize user experience）如在UI上显示用户姓名，在生日当天发送祝福消息等 总之与认证有关与授权无关</p>
<p>access token用作访问受限的资源，即身份认证授权服务器授权客户端访问某受保护的资源，为其颁发access token，在资源服务器（作为audience）上验证，access token不绑定客户端，因此可以copy出来使用，也就是客户端有责任保护自己的access token安全</p>
<p>可以说access token用于资源服务器，而不是客户端，与id token不同，它没有什么要告诉客户端的，包括账户是否已通过认证，事实上，账户退出，access token依然可以工作</p>
<p>refresh token用以刷新access token 这对于SPA可能不足以保证refresh token的安全，可以使用refresh token的轮换机制，即在access token刷新后更新refresh token，使原refresh token不会再被攻击者利用blabla<br><a target="_blank" rel="noopener" href="https://auth0.com/blog/refresh-tokens-what-are-they-and-when-to-use-them/">refresh token, what are they and when to use them</a></p>
<ul>
<li><p>客户端是在服务器上执行的传统 Web 应用程序吗？使用<a target="_blank" rel="noopener" href="https://auth0.com/docs/flows#authorization-code-flow">授权代码流</a>。</p>
</li>
<li><p>客户端是单页应用程序 (SPA) 吗？使用<a target="_blank" rel="noopener" href="https://auth0.com/docs/flows#authorization-code-flow-with-proof-key-for-code-exchange-pkce-">带有验证密钥的授权代码流进行代码交换 (PKCE)</a>。</p>
</li>
<li><p>客户端是不需要访问令牌的单页应用程序 (SPA) 吗？将<a target="_blank" rel="noopener" href="https://auth0.com/docs/flows#implicit-flow-with-form-post">隐式流与 Form Post 一起使用</a>。</p>
</li>
<li><p>客户端是资源所有者吗？您可以使用<a target="_blank" rel="noopener" href="https://auth0.com/docs/flows#client-credentials-flow">客户端凭据流</a>。</p>
</li>
<li><p>客户端是否绝对信任用户凭据？您可以使用<a target="_blank" rel="noopener" href="https://auth0.com/docs/flows#resource-owner-password-flow">Resource Owner Password Flow</a>。</p>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://qqstone.github.io/qqsnote/2019/12/06/httpdownload/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/qqsnote/images/avatar.gif">
      <meta itemprop="name" content="QQs">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="QQs'Note">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/qqsnote/2019/12/06/httpdownload/" class="post-title-link" itemprop="url">一个Download的实现</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-12-06 12:42:47" itemprop="dateCreated datePublished" datetime="2019-12-06T12:42:47+08:00">2019-12-06</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-06-08 20:33:40" itemprop="dateModified" datetime="2025-06-08T20:33:40+08:00">2025-06-08</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/qqsnote/categories/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/" itemprop="url" rel="index"><span itemprop="name">前端技术</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="fetch-download-CORS-issue"><a href="#fetch-download-CORS-issue" class="headerlink" title="fetch download CORS issue"></a>fetch download CORS issue</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">const fetchDCM &#x3D; async (url:string) &#x3D;&gt; &#123;</span><br><span class="line">const response &#x3D; await fetch(url, &#123; method: &quot;GET&quot; &#125;)</span><br><span class="line">if (response.ok) &#123;</span><br><span class="line">    const buffer &#x3D; await response.arrayBuffer()</span><br><span class="line">    const data &#x3D; parseLoadData(buffer);</span><br><span class="line">    ......</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>浏览器中点击直接下载文件的链接，放在fetch方法中会有跨域问题</p>
<p>浏览器中点击下载文件的链接时，这被视为用户的直接操作，浏览器允许这类导航请求执行，因为它符合用户的意图且风险较低。</p>
<p>fetch属于AJAX请求范畴，会受到同源策略的严格限制。即使请求的目标是下载一个文件，浏览器也会将其视为脚本试图访问跨域资源，从而可能触发跨域资源共享（CORS）检查。如果服务器没有正确配置CORS响应头，允许你的源域名发起请求，浏览器就会阻止这次请求或者请求成功但无法访问响应体中的数据。</p>
<p>CORS（跨域资源共享）主要是为了保护客户端（即用户的浏览器）的安全和隐私，同时也为服务器端提供了一定程度上的控制权。其工作原理是通过在浏览器层面实施安全策略，确保来自不同源的Web内容不能随意访问或操作其他源的资源，除非得到服务器的明确许可。</p>
<p>具体来说，当一个网页尝试通过JavaScript等客户端脚本从不同的源加载数据时，CORS机制会要求浏览器在实际发送请求之前，先向服务器发起一个预检（preflight）请求，询问服务器是否允许这样的跨域操作。服务器通过在响应头中添加特定的CORS相关字段，如Access-Control-Allow-Origin，来指示浏览器哪些来源的请求是可以接受的。如果服务器不允许该请求，浏览器则会阻止客户端脚本获取响应数据，从而防止了潜在的安全威胁，如跨站脚本攻击（XSS）和数据泄露等。</p>
<p>因此，虽然CORS规则是由服务器设置并返回给客户端的，其主要目的还是在于保护客户端免受恶意第三方网站的侵害，同时给予服务器对资源访问权限的精细控制。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; Manual CORS Configuration</span><br><span class="line">app.use((req, res, next) &#x3D;&gt; &#123;</span><br><span class="line">    res.header(&#39;Access-Control-Allow-Origin&#39;, &#39;*&#39;);</span><br><span class="line">    res.header(&#39;Access-Control-Allow-Headers&#39;, </span><br><span class="line">               &#39;Origin, X-Requested-With, Content-Type, Accept&#39;);</span><br><span class="line">    next();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.get(&#39;&#x2F;download&#x2F;:filename&#39;, (req, res) &#x3D;&gt; &#123;</span><br><span class="line">    const filePath &#x3D; path.join(__dirname, &#39;public&#39;, req.params.filename);</span><br><span class="line">    res.setHeader(&#39;Content-Disposition&#39;, &#39;attachment;&#39;);</span><br><span class="line">    const readStream &#x3D; fs.createReadStream(filePath);</span><br><span class="line">    readStream.pipe(res);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<h4 id="需求：导出列表"><a href="#需求：导出列表" class="headerlink" title="需求：导出列表"></a>需求：导出列表</h4><p>一个服务端分页的可检索列表，页面只缓存当前页的数据，导出功能无法完全在前端，点击export将现有检索条件传到后端，由后端查询数据库并生成excel文件，传到前端。</p>
<h4 id="后端实现-Express-js"><a href="#后端实现-Express-js" class="headerlink" title="后端实现(Express.js)"></a>后端实现(Express.js)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">app.post(&#39;&#x2F;list&#x2F;export&#39;, (req,res)&#x3D;&gt;&#123;</span><br><span class="line">    const data &#x3D; getDataFromDB(req.body)</span><br><span class="line">        generateExcel(results, ()&#x3D;&gt;&#123;</span><br><span class="line">            res.download(path.join(__dirname,&#39;list.xlsx&#39;));</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;, err &#x3D;&gt; &#123;</span><br><span class="line">        res.json(err)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">const columns &#x3D; [</span><br><span class="line">    &#123; header: &#39;ID&#39;, key: &#39;id&#39;, width: 32 &#125;,</span><br><span class="line">    &#123; header: &#39;Name&#39;, key: &#39;name&#39;, width: 32 &#125;];</span><br><span class="line">const generateExcel &#x3D; function(data, callback)&#123;</span><br><span class="line">    const excel &#x3D; require(&#39;exceljs&#39;);</span><br><span class="line">    &#x2F;&#x2F; create excel workbook</span><br><span class="line">    var options &#x3D; &#123;</span><br><span class="line">        filename:path.join(__dirname, &#39;list.xlsx&#39;),</span><br><span class="line">        useStyles: true,</span><br><span class="line">        useSharedStrings: true</span><br><span class="line">    &#125;;</span><br><span class="line">    const workbook &#x3D; new excel.stream.xlsx.WorkbookWriter(options);</span><br><span class="line">    workbook.creator &#x3D; &#39;QQs&#39;;</span><br><span class="line">    workbook.created &#x3D; new Date();</span><br><span class="line">    workbook.modified &#x3D; new Date();</span><br><span class="line">    &#x2F;&#x2F; views</span><br><span class="line">    workbook.views &#x3D; [</span><br><span class="line">        &#123;</span><br><span class="line">            x: 0, y: 0, width: 10000, height: 20000,</span><br><span class="line">            firstSheet: 0, activeTab: 1, visibility: &#39;visible&#39;</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">    &#x2F;&#x2F; add worksheet</span><br><span class="line">    const sheet &#x3D; workbook.addWorksheet(&#39;List&#39;);</span><br><span class="line">    &#x2F;&#x2F; define columns</span><br><span class="line">    sheet.columns &#x3D; columns;</span><br><span class="line">    &#x2F;&#x2F; add rows</span><br><span class="line">    &#x2F;*</span><br><span class="line">    数据量大的情况下考虑到nodejs内存分配瓶颈</span><br><span class="line">    *应限制每次select的条数分批addRow并且Row.commit</span><br><span class="line">    *&#x2F;</span><br><span class="line">    data.forEach(record &#x3D;&gt; &#123;</span><br><span class="line">        const row &#x3D; record;</span><br><span class="line">        &#x2F;&#x2F; TODO data convertor</span><br><span class="line">        sheet.addRow(row).commit();</span><br><span class="line">    &#125;);</span><br><span class="line">    sheet.commit();</span><br><span class="line">    workbook.commit().then(callback);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>生成Excel用到了第三方库exceljs，该库实现了流式写excel的方法，可以在数据量较大的情况下缓解IO压力(待考证)</p>
<p>response.download(filename)方法以Blob方式返回数据</p>
<h4 id="前端实现-Angular8"><a href="#前端实现-Angular8" class="headerlink" title="前端实现(Angular8)"></a>前端实现(Angular8)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">export() &#123;</span><br><span class="line">    const postParams &#x3D; new Object();</span><br><span class="line">    &#x2F;&#x2F; TODO collect query parameters</span><br><span class="line">    this.httpClient</span><br><span class="line">      .post(&#39;list&#x2F;export&#39;, postParams, &#123;</span><br><span class="line">        responseType: &#39;blob&#39;,</span><br><span class="line">        headers: new HttpHeaders().append(&#39;Content-Type&#39;, &#39;application&#x2F;json&#39;),</span><br><span class="line">      &#125;)</span><br><span class="line">      .subscribe(res &#x3D;&gt; &#123;</span><br><span class="line">        this.downloadFile(res);</span><br><span class="line">      &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  &#x2F;**</span><br><span class="line">   * 创建blob对象，并利用浏览器打开url进行下载</span><br><span class="line">   * @param data 文件流数据</span><br><span class="line">   *&#x2F;</span><br><span class="line">  downloadFile(data) &#123;</span><br><span class="line">    &#x2F;&#x2F; 下载类型 xls</span><br><span class="line">    const contentType &#x3D; &#39;application&#x2F;vnd.openxmlformats-officedocument.spreadsheetml.sheet&#39;;</span><br><span class="line">    const blob &#x3D; new Blob([data], &#123; type: contentType &#125;);</span><br><span class="line">    const url &#x3D; window.URL.createObjectURL(blob);</span><br><span class="line">    &#x2F;&#x2F; 打开新窗口方式进行下载</span><br><span class="line">    &#x2F;&#x2F; window.open(url);</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; 以动态创建a标签进行下载</span><br><span class="line">    const a &#x3D; document.createElement(&#39;a&#39;);</span><br><span class="line">    a.href &#x3D; url;</span><br><span class="line">    &#x2F;&#x2F; a.download &#x3D; fileName;</span><br><span class="line">    a.download &#x3D; &#39;list.xlsx&#39;;</span><br><span class="line">    a.click();</span><br><span class="line">    window.URL.revokeObjectURL(url);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>接受请求必须设置response headers，否则默认设置无法取得返回值并进入next回调。</p>
<h4 id="单次下载限制"><a href="#单次下载限制" class="headerlink" title="单次下载限制"></a>单次下载限制</h4><p>浏览器下载线程有限制，通常同一时间下载不超过10个文件，超过数量的请求直接被无视</p>
<p>解决方案一是设置时间间隔 避免同时下载<br>二是zip一下打包下载 <a target="_blank" rel="noopener" href="https://stuk.github.io/jszip/documentation/examples.html">jszip</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://qqstone.github.io/qqsnote/2019/12/04/NodejsFramework/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/qqsnote/images/avatar.gif">
      <meta itemprop="name" content="QQs">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="QQs'Note">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/qqsnote/2019/12/04/NodejsFramework/" class="post-title-link" itemprop="url">Nodejs服务端框架</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-12-04 19:03:17" itemprop="dateCreated datePublished" datetime="2019-12-04T19:03:17+08:00">2019-12-04</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-01-13 19:47:30" itemprop="dateModified" datetime="2020-01-13T19:47:30+08:00">2020-01-13</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/qqsnote/categories/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/" itemprop="url" rel="index"><span itemprop="name">前端技术</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Express"><a href="#Express" class="headerlink" title="Express"></a>Express</h3><p>集合式开发框架，自身已经集成了诸多常用中间件如，router， static， bodyparse等。然而随着开发需求的丰富，仍然不免要在github上调查采集。</p>
<p>某年月日，基于express.js的服务，使用了morgan格式化日志，如何记response body是个难题，因为一旦response.end()或者response.json(x),其发送的内容将不复存在。</p>
<blockquote>
<p>express 的中间件机制是线性执行的</p>
</blockquote>
<p>受限于当时的js标准，异步过程只能以回调的方式实现，如果顺位在后的中间件返回结果到前一个，必须在调用后者时就带上回调函数, 当中间件“链”很长时，就成了Callback Hell</p>
<p>于是作者（TJ Holowaychuk大神）又写了一个Koa，实现洋葱模型的中间件机制。</p>
<h3 id="Koa"><a href="#Koa" class="headerlink" title="Koa"></a>Koa</h3><p>据说是轻量级、渐进式框架。</p>
<h3 id="Egg"><a href="#Egg" class="headerlink" title="Egg"></a>Egg</h3><p>阿里基于Koa统一规范化常用服务及功能，给出较为详细的文档说明，势必免去开发者一些调查采集的工作。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://qqstone.github.io/qqsnote/2019/11/27/login/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/qqsnote/images/avatar.gif">
      <meta itemprop="name" content="QQs">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="QQs'Note">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/qqsnote/2019/11/27/login/" class="post-title-link" itemprop="url">login</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-11-27 10:40:35" itemprop="dateCreated datePublished" datetime="2019-11-27T10:40:35+08:00">2019-11-27</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-01-13 19:47:30" itemprop="dateModified" datetime="2020-01-13T19:47:30+08:00">2020-01-13</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/qqsnote/categories/%E6%9E%B6%E6%9E%84/" itemprop="url" rel="index"><span itemprop="name">架构</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>在ng-alain脚手架项目中，默认存token到localstorage（也可以配置为其他存储类型），运行期间不再改动配置。</p>
<blockquote>
<p>不应该把 Remember me 当作实际授权有效期的条件，Token 该什么时候过期就应该什么时候过期， Remember me 一般是用于支持自动无感刷新 Token。</p>
</blockquote>
<p>redis value中存token，expire time，remember，当remember为false，应校验前端传来的token并核对expire time，当remember为true，应在token过期时自动刷新，并将新的token保存到前端</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/qqsnote/page/24/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/qqsnote/">1</a><span class="space">&hellip;</span><a class="page-number" href="/qqsnote/page/24/">24</a><span class="page-number current">25</span><a class="page-number" href="/qqsnote/page/26/">26</a><span class="space">&hellip;</span><a class="page-number" href="/qqsnote/page/32/">32</a><a class="extend next" rel="next" href="/qqsnote/page/26/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">QQs</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/qqsnote/archives/">
        
          <span class="site-state-item-count">317</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/qqsnote/categories/">
        <span class="site-state-item-count">20</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/qqsnote/tags/">
        <span class="site-state-item-count">117</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



      </div>

      <div class="tag-cloud-tags">
        <a href="/qqsnote/tags/Net/" style="font-size: 30px; color: #fff">.Net</a> <a href="/qqsnote/tags/4G/" style="font-size: 12px; color: #ccc">4G</a> <a href="/qqsnote/tags/AI/" style="font-size: 21.82px; color: #e8e8e8">AI</a> <a href="/qqsnote/tags/Android/" style="font-size: 12px; color: #ccc">Android</a> <a href="/qqsnote/tags/Angular/" style="font-size: 30px; color: #fff">Angular</a> <a href="/qqsnote/tags/Apache/" style="font-size: 13.64px; color: #d1d1d1">Apache</a> <a href="/qqsnote/tags/Azure/" style="font-size: 26.73px; color: #f6f6f6">Azure</a> <a href="/qqsnote/tags/Babylon/" style="font-size: 12px; color: #ccc">Babylon</a> <a href="/qqsnote/tags/C/" style="font-size: 16.91px; color: #dadada">C#</a> <a href="/qqsnote/tags/C/" style="font-size: 16.91px; color: #dadada">C++</a> <a href="/qqsnote/tags/CSS/" style="font-size: 20.18px; color: #e3e3e3">CSS</a> <a href="/qqsnote/tags/DevOps/" style="font-size: 15.27px; color: #d5d5d5">DevOps</a> <a href="/qqsnote/tags/Docker/" style="font-size: 16.91px; color: #dadada">Docker</a> <a href="/qqsnote/tags/ES6/" style="font-size: 12px; color: #ccc">ES6</a> <a href="/qqsnote/tags/ESLint/" style="font-size: 12px; color: #ccc">ESLint</a> <a href="/qqsnote/tags/ElasticSearch/" style="font-size: 12px; color: #ccc">ElasticSearch</a> <a href="/qqsnote/tags/Electron/" style="font-size: 16.91px; color: #dadada">Electron</a> <a href="/qqsnote/tags/ElementUI/" style="font-size: 12px; color: #ccc">ElementUI</a> <a href="/qqsnote/tags/EntityFramework/" style="font-size: 13.64px; color: #d1d1d1">EntityFramework</a> <a href="/qqsnote/tags/Excel/" style="font-size: 12px; color: #ccc">Excel</a> <a href="/qqsnote/tags/FastDFS/" style="font-size: 12px; color: #ccc">FastDFS</a> <a href="/qqsnote/tags/Figma/" style="font-size: 12px; color: #ccc">Figma</a> <a href="/qqsnote/tags/Go/" style="font-size: 12px; color: #ccc">Go</a> <a href="/qqsnote/tags/GraphQL/" style="font-size: 12px; color: #ccc">GraphQL</a> <a href="/qqsnote/tags/Jasmine/" style="font-size: 12px; color: #ccc">Jasmine</a> <a href="/qqsnote/tags/Java/" style="font-size: 13.64px; color: #d1d1d1">Java</a> <a href="/qqsnote/tags/Jenkins/" style="font-size: 21.82px; color: #e8e8e8">Jenkins</a> <a href="/qqsnote/tags/Linux/" style="font-size: 23.45px; color: #ececec">Linux</a> <a href="/qqsnote/tags/MQ/" style="font-size: 12px; color: #ccc">MQ</a> <a href="/qqsnote/tags/Markdown/" style="font-size: 13.64px; color: #d1d1d1">Markdown</a> <a href="/qqsnote/tags/MongoDB/" style="font-size: 12px; color: #ccc">MongoDB</a> <a href="/qqsnote/tags/MySQL/" style="font-size: 12px; color: #ccc">MySQL</a> <a href="/qqsnote/tags/NSIS/" style="font-size: 12px; color: #ccc">NSIS</a> <a href="/qqsnote/tags/Nginx/" style="font-size: 12px; color: #ccc">Nginx</a> <a href="/qqsnote/tags/NoSQL/" style="font-size: 12px; color: #ccc">NoSQL</a> <a href="/qqsnote/tags/Node-js/" style="font-size: 18.55px; color: #dfdfdf">Node.js</a> <a href="/qqsnote/tags/OData/" style="font-size: 13.64px; color: #d1d1d1">OData</a> <a href="/qqsnote/tags/OpenCV/" style="font-size: 18.55px; color: #dfdfdf">OpenCV</a> <a href="/qqsnote/tags/PHP/" style="font-size: 12px; color: #ccc">PHP</a> <a href="/qqsnote/tags/PWA/" style="font-size: 12px; color: #ccc">PWA</a> <a href="/qqsnote/tags/Python/" style="font-size: 25.09px; color: #f1f1f1">Python</a> <a href="/qqsnote/tags/React/" style="font-size: 21.82px; color: #e8e8e8">React</a> <a href="/qqsnote/tags/SQL/" style="font-size: 12px; color: #ccc">SQL</a> <a href="/qqsnote/tags/SQL-Server/" style="font-size: 15.27px; color: #d5d5d5">SQL_Server</a> <a href="/qqsnote/tags/ServiceWorker/" style="font-size: 12px; color: #ccc">ServiceWorker</a> <a href="/qqsnote/tags/Shell/" style="font-size: 12px; color: #ccc">Shell</a> <a href="/qqsnote/tags/TypeScript/" style="font-size: 13.64px; color: #d1d1d1">TypeScript</a> <a href="/qqsnote/tags/UE/" style="font-size: 12px; color: #ccc">UE</a> <a href="/qqsnote/tags/UI/" style="font-size: 12px; color: #ccc">UI</a> <a href="/qqsnote/tags/UML/" style="font-size: 12px; color: #ccc">UML</a> <a href="/qqsnote/tags/Virtualbox/" style="font-size: 12px; color: #ccc">Virtualbox</a> <a href="/qqsnote/tags/WPF/" style="font-size: 12px; color: #ccc">WPF</a> <a href="/qqsnote/tags/WebGL/" style="font-size: 20.18px; color: #e3e3e3">WebGL</a> <a href="/qqsnote/tags/WebService/" style="font-size: 12px; color: #ccc">WebService</a> <a href="/qqsnote/tags/Web%E5%8D%8F%E8%AE%AE/" style="font-size: 12px; color: #ccc">Web协议</a> <a href="/qqsnote/tags/Web%E5%BC%80%E5%8F%91/" style="font-size: 26.73px; color: #f6f6f6">Web开发</a> <a href="/qqsnote/tags/Wechat/" style="font-size: 12px; color: #ccc">Wechat</a> <a href="/qqsnote/tags/object-Object/" style="font-size: 12px; color: #ccc">[object Object]</a> <a href="/qqsnote/tags/aigc/" style="font-size: 12px; color: #ccc">aigc</a> <a href="/qqsnote/tags/auth/" style="font-size: 12px; color: #ccc">auth</a> <a href="/qqsnote/tags/axios/" style="font-size: 12px; color: #ccc">axios</a> <a href="/qqsnote/tags/canvas/" style="font-size: 12px; color: #ccc">canvas</a> <a href="/qqsnote/tags/css/" style="font-size: 12px; color: #ccc">css</a> <a href="/qqsnote/tags/express/" style="font-size: 12px; color: #ccc">express</a> <a href="/qqsnote/tags/ftp/" style="font-size: 12px; color: #ccc">ftp</a> <a href="/qqsnote/tags/git/" style="font-size: 13.64px; color: #d1d1d1">git</a> <a href="/qqsnote/tags/hexo/" style="font-size: 12px; color: #ccc">hexo</a> <a href="/qqsnote/tags/http/" style="font-size: 12px; color: #ccc">http</a> <a href="/qqsnote/tags/https/" style="font-size: 12px; color: #ccc">https</a> <a href="/qqsnote/tags/ionic/" style="font-size: 12px; color: #ccc">ionic</a> <a href="/qqsnote/tags/javascript/" style="font-size: 28.36px; color: #fafafa">javascript</a> <a href="/qqsnote/tags/k8s/" style="font-size: 12px; color: #ccc">k8s</a> <a href="/qqsnote/tags/login/" style="font-size: 12px; color: #ccc">login</a> <a href="/qqsnote/tags/loopback/" style="font-size: 12px; color: #ccc">loopback</a> <a href="/qqsnote/tags/npm/" style="font-size: 12px; color: #ccc">npm</a> <a href="/qqsnote/tags/nsis/" style="font-size: 13.64px; color: #d1d1d1">nsis</a> <a href="/qqsnote/tags/redis/" style="font-size: 12px; color: #ccc">redis</a> <a href="/qqsnote/tags/sqlServer/" style="font-size: 12px; color: #ccc">sqlServer</a> <a href="/qqsnote/tags/ssh/" style="font-size: 12px; color: #ccc">ssh</a> <a href="/qqsnote/tags/svg/" style="font-size: 12px; color: #ccc">svg</a> <a href="/qqsnote/tags/vtk/" style="font-size: 16.91px; color: #dadada">vtk</a> <a href="/qqsnote/tags/vuejs/" style="font-size: 16.91px; color: #dadada">vuejs</a> <a href="/qqsnote/tags/webassembly/" style="font-size: 13.64px; color: #d1d1d1">webassembly</a> <a href="/qqsnote/tags/webpack/" style="font-size: 12px; color: #ccc">webpack</a> <a href="/qqsnote/tags/websocket/" style="font-size: 12px; color: #ccc">websocket</a> <a href="/qqsnote/tags/windows/" style="font-size: 12px; color: #ccc">windows</a> <a href="/qqsnote/tags/yarn/" style="font-size: 12px; color: #ccc">yarn</a> <a href="/qqsnote/tags/%E4%B8%8A%E4%BC%A0/" style="font-size: 12px; color: #ccc">上传</a> <a href="/qqsnote/tags/%E5%8A%A0%E5%AF%86/" style="font-size: 16.91px; color: #dadada">加密</a> <a href="/qqsnote/tags/%E5%8C%BB%E5%AD%A6%E5%9B%BE%E5%83%8F/" style="font-size: 12px; color: #ccc">医学图像</a> <a href="/qqsnote/tags/%E5%8D%8F%E8%AE%AE%E5%92%8C%E8%A7%84%E8%8C%83/" style="font-size: 12px; color: #ccc">协议和规范</a> <a href="/qqsnote/tags/%E5%8D%9A%E5%BC%88%E8%AE%BA/" style="font-size: 12px; color: #ccc">博弈论</a> <a href="/qqsnote/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/" style="font-size: 13.64px; color: #d1d1d1">图像处理</a> <a href="/qqsnote/tags/%E5%9B%BE%E5%BD%A2%E5%AD%A6/" style="font-size: 15.27px; color: #d5d5d5">图形学</a> <a href="/qqsnote/tags/%E5%A4%9A%E8%AF%AD%E8%A8%80/" style="font-size: 13.64px; color: #d1d1d1">多语言</a> <a href="/qqsnote/tags/%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B/" style="font-size: 12px; color: #ccc">存储过程</a> <a href="/qqsnote/tags/%E6%80%A7%E8%83%BD/" style="font-size: 12px; color: #ccc">性能</a> <a href="/qqsnote/tags/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/" style="font-size: 12px; color: #ccc">性能优化</a> <a href="/qqsnote/tags/%E6%88%90%E9%95%BF%E6%80%9D%E7%BB%B4/" style="font-size: 12px; color: #ccc">成长思维</a> <a href="/qqsnote/tags/%E6%91%84%E5%BD%B1/" style="font-size: 12px; color: #ccc">摄影</a> <a href="/qqsnote/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" style="font-size: 12px; color: #ccc">操作系统</a> <a href="/qqsnote/tags/%E6%95%B0%E5%AD%97%E7%AD%BE%E5%90%8D/" style="font-size: 12px; color: #ccc">数字签名</a> <a href="/qqsnote/tags/%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96/" style="font-size: 12px; color: #ccc">数据可视化</a> <a href="/qqsnote/tags/%E6%95%B0%E6%8D%AE%E5%BA%93%E9%94%81/" style="font-size: 12px; color: #ccc">数据库锁</a> <a href="/qqsnote/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/" style="font-size: 12px; color: #ccc">树莓派</a> <a href="/qqsnote/tags/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" style="font-size: 12px; color: #ccc">正则表达式</a> <a href="/qqsnote/tags/%E7%89%A9%E8%81%94%E7%BD%91/" style="font-size: 12px; color: #ccc">物联网</a> <a href="/qqsnote/tags/%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F/" style="font-size: 13.64px; color: #d1d1d1">环境变量</a> <a href="/qqsnote/tags/%E7%AE%97%E6%B3%95/" style="font-size: 15.27px; color: #d5d5d5">算法</a> <a href="/qqsnote/tags/%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83/" style="font-size: 12px; color: #ccc">编码规范</a> <a href="/qqsnote/tags/%E8%A7%86%E9%A2%91%E6%B5%81/" style="font-size: 12px; color: #ccc">视频流</a> <a href="/qqsnote/tags/%E8%A7%A6%E5%8F%91%E5%99%A8/" style="font-size: 12px; color: #ccc">触发器</a> <a href="/qqsnote/tags/%E8%AE%A4%E8%AF%81-%E6%8E%88%E6%9D%83/" style="font-size: 21.82px; color: #e8e8e8">认证&授权</a> <a href="/qqsnote/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" style="font-size: 12px; color: #ccc">设计模式</a> <a href="/qqsnote/tags/%E8%AF%BB%E4%B9%A6/" style="font-size: 12px; color: #ccc">读书</a> <a href="/qqsnote/tags/%E8%BF%9B%E7%A8%8B%E5%AE%88%E6%8A%A4/" style="font-size: 12px; color: #ccc">进程守护</a> <a href="/qqsnote/tags/%E9%9D%A2%E8%AF%95/" style="font-size: 13.64px; color: #d1d1d1">面试</a>
      </div>
    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">QQs</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/qqsnote/lib/anime.min.js"></script>
  <script src="/qqsnote/lib/velocity/velocity.min.js"></script>
  <script src="/qqsnote/lib/velocity/velocity.ui.min.js"></script>

<script src="/qqsnote/js/utils.js"></script>

<script src="/qqsnote/js/motion.js"></script>


<script src="/qqsnote/js/schemes/muse.js"></script>


<script src="/qqsnote/js/next-boot.js"></script>




  















  

  

  

</body>
</html>
