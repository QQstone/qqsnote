<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/qqsnote/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/qqsnote/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/qqsnote/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/qqsnote/images/logo.svg" color="#222">

<link rel="stylesheet" href="/qqsnote/css/main.css">


<link rel="stylesheet" href="/qqsnote/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"qqstone.github.io","root":"/qqsnote/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="QQs&#39;Note">
<meta property="og:url" content="http://qqstone.github.io/qqsnote/page/11/index.html">
<meta property="og:site_name" content="QQs&#39;Note">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="QQs">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://qqstone.github.io/qqsnote/page/11/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>QQs'Note</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/qqsnote/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">QQs'Note</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/qqsnote/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/qqsnote/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://qqstone.github.io/qqsnote/2022/01/05/dotNetCore-swagger/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/qqsnote/images/avatar.gif">
      <meta itemprop="name" content="QQs">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="QQs'Note">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/qqsnote/2022/01/05/dotNetCore-swagger/" class="post-title-link" itemprop="url">dotNetCore-swagger</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-01-05 18:54:21" itemprop="dateCreated datePublished" datetime="2022-01-05T18:54:21+08:00">2022-01-05</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-03-02 20:11:18" itemprop="dateModified" datetime="2025-03-02T20:11:18+08:00">2025-03-02</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/qqsnote/categories/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/" itemprop="url" rel="index"><span itemprop="name">后端技术</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/zh-cn/aspnet/core/tutorials/web-api-help-pages-using-swagger?view=aspnetcore-6.0">Microsoft DOc: Swagger/OpenAPI</a> Swagger 项目已于 2015 年捐赠给 OpenAPI 计划，自此它被称为 OpenAPI。 是一个与语言无关的规范，用于描述 REST API。 它使计算机和用户无需直接访问源代码即可了解 REST API 的功能。</p>
<p>visual stuadio创建ASP.NET Core Web API项目模板，包含Enable OpenAPI support选项 即swagger页面<br><img src="https://i0.wp.com/tvax3.sinaimg.cn/large/a60edd42gy1gy3voeuu6oj20sg0iwmzu.jpg" alt="swagger"><br>初始startup.cs的配置是<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">public void ConfigureServices(IServiceCollection services)</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    services.AddControllers();</span><br><span class="line">    services.AddSwaggerGen(c &#x3D;&gt;</span><br><span class="line">    &#123;</span><br><span class="line">        c.SwaggerDoc(&quot;v1&quot;, new OpenApiInfo &#123; Title &#x3D; &quot;WebApplication1&quot;, Version &#x3D; &quot;v1&quot; &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line">public void Configure(IApplicationBuilder app, IWebHostEnvironment env)</span><br><span class="line">&#123;</span><br><span class="line">    if (env.IsDevelopment())</span><br><span class="line">    &#123;</span><br><span class="line">        app.UseDeveloperExceptionPage();</span><br><span class="line">        app.UseSwagger();</span><br><span class="line">        app.UseSwaggerUI(c &#x3D;&gt; c.SwaggerEndpoint(&quot;&#x2F;swagger&#x2F;v1&#x2F;swagger.json&quot;, &quot;WebApplication1 v1&quot;));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    app.UseHttpsRedirection();</span><br><span class="line"></span><br><span class="line">    app.UseRouting();</span><br><span class="line"></span><br><span class="line">    app.UseAuthorization();</span><br><span class="line"></span><br><span class="line">    app.UseEndpoints(endpoints &#x3D;&gt;</span><br><span class="line">    &#123;</span><br><span class="line">        endpoints.MapControllers();</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>配置加载名为swagger.json的接口描述，记作WebApplication1 v1的接口文档</p>
<p>swagger.json不会自动生成 从controller获取接口文档由下述swagger的实现包完成</p>
<h4 id="Swashbuckle-AspNetCore"><a href="#Swashbuckle-AspNetCore" class="headerlink" title="Swashbuckle.AspNetCore"></a>Swashbuckle.AspNetCore</h4><p>启用xml注释<br>右键API项目 -&gt; Properties -&gt; Build -&gt; Output<br>Output path 为空 即项目根目录<br>勾选XML documentation file 并命名<br><img src="https://i0.wp.com/tvax4.sinaimg.cn/large/a60edd42gy1gy3w5kk83gj20qp0g10x2.jpg" alt="xmlswagger"><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">services.AddSwaggerGen(c &#x3D;&gt;</span><br><span class="line">&#123;</span><br><span class="line">    c.SwaggerDoc(&quot;v1&quot;, new OpenApiInfo &#123; Title &#x3D; &quot;WebApplication1&quot;, Version &#x3D; &quot;v1&quot; &#125;);</span><br><span class="line">    c.DocInclusionPredicate((name, api) &#x3D;&gt; api.HttpMethod !&#x3D; null);</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; Locate the XML file being generated by ASP.NET</span><br><span class="line">    var xmlFiles &#x3D; Directory.GetFiles(AppContext.BaseDirectory, &quot;WebApplication1.API.xml&quot;, SearchOption.TopDirectoryOnly);</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; Tell Swagger to use those XML comments.</span><br><span class="line">    xmlFiles.ToList().ForEach(xmlFile &#x3D;&gt; c.IncludeXmlComments(xmlFile));</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><br>详情待续 参考<a target="_blank" rel="noopener" href="https://docs.microsoft.com/zh-cn/aspnet/core/tutorials/getting-started-with-swashbuckle?view=aspnetcore-6.0&amp;tabs=visual-studio">Microsoft Doc：Swashbuckle入门</a></p>
<h4 id="OData-API的接口文档（存目）"><a href="#OData-API的接口文档（存目）" class="headerlink" title="OData API的接口文档（存目）"></a>OData API的接口文档（存目）</h4>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://qqstone.github.io/qqsnote/2021/12/24/PaddleX/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/qqsnote/images/avatar.gif">
      <meta itemprop="name" content="QQs">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="QQs'Note">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/qqsnote/2021/12/24/PaddleX/" class="post-title-link" itemprop="url">PaddleX</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-12-24 17:03:57" itemprop="dateCreated datePublished" datetime="2021-12-24T17:03:57+08:00">2021-12-24</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2024-06-15 16:30:40" itemprop="dateModified" datetime="2024-06-15T16:30:40+08:00">2024-06-15</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>百度旗下深度学习平台<br>介于网络问题 使用源码编译 参考<a target="_blank" rel="noopener" href="https://www.paddlepaddle.org.cn/documentation/docs/zh/1.5/beginners_guide/install/compile/compile_Windows.html">PaddlePaddle在Windows下使用源码编译</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cmake .. -G &quot;Visual Studio 16 2019&quot; -A x64 -DPY_VERSION&#x3D;3.8 -DPYTHON_INCLUDE_DIR&#x3D;C:\\Users\\qqqst\\AppData\\Local\\Programs\\Python\\Python38\\include -DPYTHON_LIBRARY&#x3D;C:\\Users\\qqqst\\AppData\\Local\\Programs\\Python\\Python38\\Lib -DPYTHON_EXECUTABLE&#x3D;C:\\Users\\qqqst\\AppData\\Local\\Programs\\Python\\Python38\\python.exe -DWITH_FLUID_ONLY&#x3D;ON -DWITH_GPU&#x3D;ON -DWITH_TESTING&#x3D;OFF -DCMAKE_BUILD_TYPE&#x3D;Release -DCUDA_TOOLKIT_ROOT_DIR&#x3D;&quot;C:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v11.3&quot;</span><br></pre></td></tr></table></figure>
<p>若使用其他MSBuild编译过 产生./build/CMakeFiles以及CMakeCache.txt 需要先删除</p>
<p>使用Release x64编译</p>
<p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/zh-cn/cpp/error-messages/compiler-errors-2/compiler-error-c3848?view=msvc-170">Error C3848</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/PaddlePaddle/Paddle/issues/28391#issuecomment-900952420">Fix protobuf compile error</a></p>
<p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/1183700/what-is-the-meaning-of-this-c-error-stdlength-error">small_vector issue: length_error is not a member of std</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/betterpig/Paddle/tree/vs2019">pull request: betterpig/Paddle ‘vs2019’</a><br>Release x64， 先编译third_party,再编译solution 得到约50m的 build\python\dist*.whl<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install -U xxx.whl</span><br></pre></td></tr></table></figure></p>
<p>PaddleX GUI安装正确姿势 （2022.1.1 paddle v2.2）</p>
<ul>
<li>nvidia cuda 11.2</li>
<li>nvdia cudnn 8.2.1 （for cuda v11.2 v11.3）解压覆盖 cuda 安装目录相应文件夹</li>
<li>pip install numpy protobuf  wheel</li>
<li>pip 警告版本更新 则升级pip</li>
<li>python -m pip install paddlepaddle-gpu==2.2.1.post112 -f <a target="_blank" rel="noopener" href="https://www.paddlepaddle.org.cn/whl/windows/mkl/avx/stable.html">https://www.paddlepaddle.org.cn/whl/windows/mkl/avx/stable.html</a></li>
<li>下载解压 <a target="_blank" rel="noopener" href="https://www.paddlepaddle.org.cn/paddlex/download">GUI client </a></li>
</ul>
<h4 id="Anaconda"><a href="#Anaconda" class="headerlink" title="Anaconda"></a>Anaconda</h4><p>大概是python工具链版本控制</p>
<p>windows start -&gt; Anaconda3 -&gt; Anaconda Prompt<br>创建激活conda环境<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 创建名为my_paddlex的环境，指定Python版本为3.8</span><br><span class="line">conda create -n my_paddlex python&#x3D;3.8</span><br><span class="line"># 进入my_paddlex环境</span><br><span class="line">conda activate my_paddlex</span><br></pre></td></tr></table></figure></p>
<h4 id="LabelMe"><a href="#LabelMe" class="headerlink" title="LabelMe"></a>LabelMe</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">conda activate my_paddlex</span><br><span class="line">conda install pyqt</span><br><span class="line">pip install labelme</span><br><span class="line"># 启动</span><br><span class="line">labelme</span><br></pre></td></tr></table></figure>
<h4 id="ToDo"><a href="#ToDo" class="headerlink" title="ToDo"></a>ToDo</h4><ul>
<li>主要的学习算法</li>
<li>评估报告及指标的涵义 **</li>
<li>模型预测实践</li>
<li><p>结果详细参数导出 <em>*</em></p>
</li>
<li><p>圆形标记 -&gt; 目标范围集合R = (U0,U1…Un)</p>
</li>
<li>抠图</li>
<li>导出目标滤波</li>
<li>计算每个范围内的全物理量</li>
<li>动态化统计阈值<h4 id="issues"><a href="#issues" class="headerlink" title="issues"></a>issues</h4><blockquote>
<p>Cannot allocate ???kb  memory on GPU 0,  memory has been allocated and available memory is only 0.000000B.</p>
</blockquote>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://qqstone.github.io/qqsnote/2021/12/14/Figma/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/qqsnote/images/avatar.gif">
      <meta itemprop="name" content="QQs">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="QQs'Note">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/qqsnote/2021/12/14/Figma/" class="post-title-link" itemprop="url">Figma</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-12-14 10:15:24" itemprop="dateCreated datePublished" datetime="2021-12-14T10:15:24+08:00">2021-12-14</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-06-08 20:33:40" itemprop="dateModified" datetime="2025-06-08T20:33:40+08:00">2025-06-08</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><a target="_blank" rel="noopener" href="https://www.uisdc.com/11-figma-tricks-wish-i-knew-1">11 个 Figma 技巧</a> <a target="_blank" rel="noopener" href="https://uxdesign.cc/10-figma-tricks-i-wish-i-knew-earlier-698e66a893f8">英文版</a></p>
<h4 id="TODO"><a href="#TODO" class="headerlink" title="TODO"></a>TODO</h4><p>导入素材 如material UI控件样例以及Icons</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://qqstone.github.io/qqsnote/2021/11/16/MsTeamsDev/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/qqsnote/images/avatar.gif">
      <meta itemprop="name" content="QQs">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="QQs'Note">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/qqsnote/2021/11/16/MsTeamsDev/" class="post-title-link" itemprop="url">Microsoft Teams 小程序</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-11-16 19:18:49" itemprop="dateCreated datePublished" datetime="2021-11-16T19:18:49+08:00">2021-11-16</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-03-02 20:11:18" itemprop="dateModified" datetime="2025-03-02T20:11:18+08:00">2025-03-02</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/zh-cn/microsoftteams/platform/">Microsoft Teams开发人员文档</a></p>
<p>Teams App 实质是托管在Azure等服务端上的web app，Teams客户端类似于浏览器，打包部署直接用插件完成 此外微软提供sdk使之支持sso及授权访问功能</p>
<p><img src="https://docs.microsoft.com/zh-cn/microsoftteams/platform/assets/images/get-started/gs-build-options.png" alt=""></p>
<h4 id="Microsoft-365-Developer-Program"><a href="#Microsoft-365-Developer-Program" class="headerlink" title="Microsoft 365 Developer Program"></a>Microsoft 365 Developer Program</h4><p>部署及发布Teams App需要Talent的管理员权限 加入Microsoft 365 Developer Program 创建开发者账号使用免费沙盒—&gt; <a target="_blank" rel="noopener" href="https://developer.microsoft.com/microsoft-365/dev-program">Microsoft 365计划</a></p>
<p><img src="http://tva1.sinaimg.cn/large/a60edd42gy1h5jyqi2h1zj20it0n9q9q.jpg" alt="m365plan.PNG"></p>
<h4 id="安装vs-code-extraction：Teams-Toolkit-（preview）"><a href="#安装vs-code-extraction：Teams-Toolkit-（preview）" class="headerlink" title="安装vs code extraction：Teams Toolkit （preview）"></a>安装vs code extraction：Teams Toolkit （preview）</h4><h4 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h4><ul>
<li>create a new Teams app</li>
<li>select capability: Tab</li>
<li>select hosting type: Azure</li>
<li>select language: JavaScript</li>
<li>input app name<br>以上设置保存在.fx/settings.<strong>json</strong><br>├───.fx<br>│       settings.json<br>│   package.json<br>│   permissions.json<br>├───appPackage<br>│       color.png<br>│       manifest.source.json<br>│       outline.png<br>│<br>└───tabs<br>  │   .env<br>  │   .gitignore<br>  │   package.json<br>  │   README.md<br>  │<br>  ├───public<br>  │       auth-end.html<br>  │       auth-start.html<br>  │       deploy.png<br>  │       favicon.ico<br>  │       hello.png<br>  │       index.html<br>  │       publish.png<br>  │<br>  └───src<pre><code>  │   index.css
  │   index.jsx
  │
  └───components
      │   App.css
      │   App.jsx
      │   Privacy.jsx
      │   Tab.jsx
      │   TabConfig.jsx
      │   TermsOfUse.jsx
</code></pre>Tab其实就是个React App<h4 id="运行和调试"><a href="#运行和调试" class="headerlink" title="运行和调试"></a>运行和调试</h4>press F5<br>调试host为 <a target="_blank" rel="noopener" href="https://localhost:3000">https://localhost:3000</a><br>偶见 localhost refused to connect. 查看Teams Toolkit的Accounts中side loading是否处于disabled状态<blockquote>
<p>Your Microsoft 365 tenant admin hasn’t enabled sideloading permission for your account. You can’t install your app to Teams! </p>
</blockquote>
</li>
</ul>
<p>出于种种原因造成的side loading disabled 应进入<a target="_blank" rel="noopener" href="https://admin.microsoft.com/adminportal/home">Microsoft365 Admin Center</a>设置<br>Show all —&gt; Admin centers —&gt; Teams Apps —&gt; Setup policies —&gt; Global<br>打开 Upload custom apps</p>
<h4 id="部署到Azure"><a href="#部署到Azure" class="headerlink" title="部署到Azure"></a>部署到Azure</h4><p>先执行Teams Toolkit提供的DEPLOYMENT—&gt;Provision in the Cloud功能，toolkit将以项目名称自行创建<del>App Service、Storage Account及Vitual Network等</del>Rescource</p>
<p>事实上，Teams Tab App的前端静态文件使用Azure Storage Account托管，访问控制通过<a target="_blank" rel="noopener" href="https://learn.microsoft.com/zh-cn/azure/app-service/tutorial-connect-app-access-storage-javascript?tabs=azure-portal">托管标识(Managed Identity)</a>, 关于Provision时创建哪种资源见<a target="_blank" rel="noopener" href="https://learn.microsoft.com/en-us/microsoftteams/platform/toolkit/provision?from=teamstoolkit&amp;pivots=visual-studio-code#create-resources">Provision cloud resources</a></p>
<p>使用Deploy to the Cloud 将当前项目作为Web App部署到前面Provision预备的资源上</p>
<p>记得配置Api的Endpoint 比如写/public/config.json</p>
<p>Zip Teams metadata package可获得该Web App的配置信息 包括名称及地址 以用于添加到Organization的Teams中</p>
<h4 id="上传到teams"><a href="#上传到teams" class="headerlink" title="上传到teams"></a>上传到teams</h4><p>编译产生 build\appPackage.local.zip 即项目的应用包，该目录下还有应用部件清单 manifest.json</p>
<p>将应用包上传到teams中测试：Teams 左边栏点击Apps —&gt; Manage your apps —&gt; Upload an app to your org’s app catalog<br>上传后图标显示在Apps列表中 可将其添加到team的chat中<br><img src="https://i0.wp.com/tvax1.sinaimg.cn/large/a60edd42gy1gx8shhfcbgj21400s5n2g.jpg" alt="upload teams app"></p>
<h4 id="发布到组织"><a href="#发布到组织" class="headerlink" title="发布到组织"></a>发布到组织</h4><h4 id="Todo-List-Sample-SPFx"><a href="#Todo-List-Sample-SPFx" class="headerlink" title="Todo List Sample (SPFx)"></a>Todo List Sample (SPFx)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm i -g teamsfx-cli &#x2F;&#x2F; 安装脚手架</span><br><span class="line">teamsfx new template list &#x2F;&#x2F; 查看可用的sample</span><br></pre></td></tr></table></figure>
<p>使用如下命令创建sample APP并基于这些sample作为模板开发自己的应用<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">teamsfx new template todo-list-SPFx</span><br></pre></td></tr></table></figure><br>在teams中打开sharepoint站点<br><img src="https://tva3.sinaimg.cn/large/a60edd42gy1gx0gcvo5g9j213c0ukn1m.jpg" alt="teams"><br>配置一个list 见<a href="">Microsoft Doc:</a><br>代码中/SPFx/src/webparts/todoList/components/SharePointListManager.ts line17 设置为sharepoint上list的名字<br>用vscode的Teams Toolkit打开项目<br><img src="https://i0.wp.com/tvax2.sinaimg.cn/large/a60edd42gy1gx0fsl3n0xj20bf0rk41z.jpg" alt="teams toolkit menu"><br>选择项目目录打开<br>在teams toolkit中选择Provision in the cloud 在Cloud端创建app<br><img src="https://tva1.sinaimg.cn/large/a60edd42gy1gx56rdzzv1j20af05d75g.jpg" alt="teams provision"><em>**</em><br>点击Deploy to the cloud部署<br>点击Publish to the cloud发布<br>访问<a target="_blank" rel="noopener" href="https://admin.teams.microsoft.com/policies/manage-apps">Microsoft Teams admin center</a>查找已发布的app<br>登录Teams添加app<br>TODO 主动从外部系统向 Teams 发送信息，允许用户从 Teams 客户端内部处理该信息。<br>TODO 允许用户在另一个系统中快速查找信息，并将结果添加到 Teams 中的对话。</p>
<h4 id="身份认证"><a href="#身份认证" class="headerlink" title="身份认证"></a>身份认证</h4><blockquote>
<p>Microsoft 或 Microsoft 365 帐户登录 Teams 后，应用用户可以使用你的应用，而无需再次登录。<br><img src="https://docs.microsoft.com/zh-cn/microsoftteams/platform/assets/images/authentication/teams-sso-tabs/sso-tab.gif" alt=""><br>如上图示，App添加到Teams，切换到该tab时 确认授权App访问Azure AD</p>
</blockquote>
<p>步骤：<br>首先 <a target="_blank" rel="noopener" href="https://docs.microsoft.com/zh-cn/microsoftteams/platform/tabs/how-to/authentication/tab-sso-register-aad#to-register-a-new-app-in-azure-ad">在AzureAD注册app</a><br><img src="https://docs.microsoft.com/zh-cn/microsoftteams/platform/assets/images/authentication/teams-sso-tabs/tab-app-created.png" alt=""></p>
<h4 id="trouble-shooting"><a href="#trouble-shooting" class="headerlink" title="trouble shooting"></a>trouble shooting</h4><blockquote>
<p>Teams Toolkit issue: Your Microsoft 365 tenant admin hasn’t enabled sideloading permission for your account. You can’t install your app to Teams</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/zh-cn/microsoftteams/platform/concepts/build-and-test/prepare-your-o365-tenant">Microsoft Doc: Prepare Your M365 Tenant</a></p>
<p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/zh-cn/microsoftteams/platform/tabs/how-to/authentication/auth-flow-tab">Tab Appde的身份验证流程</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://qqstone.github.io/qqsnote/2021/11/04/vtk-codesnippet/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/qqsnote/images/avatar.gif">
      <meta itemprop="name" content="QQs">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="QQs'Note">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/qqsnote/2021/11/04/vtk-codesnippet/" class="post-title-link" itemprop="url">vtk-codesnippet</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-11-04 11:05:27" itemprop="dateCreated datePublished" datetime="2021-11-04T11:05:27+08:00">2021-11-04</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-04-16 20:11:32" itemprop="dateModified" datetime="2022-04-16T20:11:32+08:00">2022-04-16</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/qqsnote/categories/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/" itemprop="url" rel="index"><span itemprop="name">图像处理</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="图形跟随camera"><a href="#图形跟随camera" class="headerlink" title="图形跟随camera"></a>图形跟随camera</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const orientation &#x3D; renderObject.renderer.getActiveCamera().getViewPlaneNormal(); &#x2F;&#x2F; camera法向量</span><br><span class="line">brushPipeline?.circle.setDirection(orientation[0], orientation[1], orientation[2]);</span><br></pre></td></tr></table></figure>
<p>曾尝试actor.setOrientation失败 请使用source.setDirection</p>
<h4 id="‘线’转为‘管道’"><a href="#‘线’转为‘管道’" class="headerlink" title="‘线’转为‘管道’"></a>‘线’转为‘管道’</h4><p>很多主流浏览器(包括Chrome)对webgl的实现中，设置线宽为1，在现阶段需要将line转为tube以实现‘线宽’<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">const updateTubeActor &#x3D; (actor, polydata, lineWidth) &#x3D;&gt; &#123;</span><br><span class="line">    const filter &#x3D; vtkTubeFilter.newInstance();</span><br><span class="line">    const mapper &#x3D; actor.getMapper();</span><br><span class="line">    filter.setCapping(false);</span><br><span class="line">    filter.setNumberOfSides(10);</span><br><span class="line">    filter.setRadius(lineWidth);</span><br><span class="line">    filter.setInputData(polydata);</span><br><span class="line">    mapper.setInputConnection(filter.getOutputPort());</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<ul>
<li>setCapping</li>
<li>setNumberOfSides</li>
<li>setRadius</li>
</ul>
<h4 id="get-slice"><a href="#get-slice" class="headerlink" title="get slice"></a>get slice</h4>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://qqstone.github.io/qqsnote/2021/10/25/vtk-interactor/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/qqsnote/images/avatar.gif">
      <meta itemprop="name" content="QQs">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="QQs'Note">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/qqsnote/2021/10/25/vtk-interactor/" class="post-title-link" itemprop="url">vtk-interactor</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-10-25 14:09:44" itemprop="dateCreated datePublished" datetime="2021-10-25T14:09:44+08:00">2021-10-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-03-02 20:11:18" itemprop="dateModified" datetime="2025-03-02T20:11:18+08:00">2025-03-02</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/qqsnote/categories/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/" itemprop="url" rel="index"><span itemprop="name">图像处理</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><a target="_blank" rel="noopener" href="https://kitware.github.io/vtk-js/api/Rendering_Core_RenderWindowInteractor.html">RenderWindowInteractor</a></p>
<h4 id="关于坐标"><a href="#关于坐标" class="headerlink" title="关于坐标"></a>关于坐标</h4><p><img src="https://tva2.sinaimg.cn/large/a60edd42gy1gw0ksspr0fj20et0bxgn3.jpg" alt="3d imaging"><br>RenderWindowInteractor事件中使用屏幕像素坐标<br>而3D视图中是世界坐标</p>
<ul>
<li>模型坐标系 model coordinate system</li>
</ul>
<p>　　模型坐标系固定在模型上，该坐标系在建模时由建模者指定。</p>
<ul>
<li>世界坐标系 world coordinate system</li>
</ul>
<p>　　模型所处的位置，采用世界坐标系来描述。通常每个模型都有自己的坐标系，但是只有一个世界坐标系。在对模型进行旋转、平移、缩放时，世界坐标是不变的，但模型坐标系相对于世界坐标系的空间位置关系发生了变化。通常相机与光源也在世界坐标系中定义。</p>
<ul>
<li>视点坐标系 view coordinate system</li>
</ul>
<p>　　视点坐标系能够表达对相机可见的场景，其x和y坐标的范围在（-1，1）之间，z代表深度值。世界坐标系到视点坐标系之间的转换用4*4的相机矩阵来表达。</p>
<ul>
<li><p>屏幕坐标系 display coordinate system</p>
<p>　　屏幕坐标系即图像坐标系，其坐标轴方向与视点坐标系一致，但是其x,y坐标值为像素坐标值。窗口尺寸决定了视点坐标与像素坐标的投影关系。不同的viewports（范围：0~1）能将同一个视点坐标系下的物体投影到不同的屏幕坐标系下。</p>
</li>
</ul>
<p>物体最初在模型坐标系下建立，并展示在世界坐标系中。通过相机空间变换矩阵投影到视点坐标系下，并经viewport展示在屏幕上。<br><img src="https://i0.wp.com/tvax4.sinaimg.cn/large/a60edd42gy1gw0ktswtv8j20my0hiq3z.jpg" alt="coordinate conversion"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const computerDisplayToWorld &#x3D; (x, y, z) &#x3D;&gt; &#123;</span><br><span class="line">    const view &#x3D; renderObject.renderer.getRenderWindow().getViews()[0];</span><br><span class="line">    return view.displayToWorld(x, y, z, renderObject.renderer);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://qqstone.github.io/qqsnote/2021/10/18/Jfrog/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/qqsnote/images/avatar.gif">
      <meta itemprop="name" content="QQs">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="QQs'Note">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/qqsnote/2021/10/18/Jfrog/" class="post-title-link" itemprop="url">Jfrog</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-10-18 15:15:25" itemprop="dateCreated datePublished" datetime="2021-10-18T15:15:25+08:00">2021-10-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-04-16 20:11:32" itemprop="dateModified" datetime="2022-04-16T20:11:32+08:00">2022-04-16</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://qqstone.github.io/qqsnote/2021/09/24/IdentityServer/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/qqsnote/images/avatar.gif">
      <meta itemprop="name" content="QQs">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="QQs'Note">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/qqsnote/2021/09/24/IdentityServer/" class="post-title-link" itemprop="url">Identity Server</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-09-24 09:43:54" itemprop="dateCreated datePublished" datetime="2021-09-24T09:43:54+08:00">2021-09-24</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2024-06-15 16:30:40" itemprop="dateModified" datetime="2024-06-15T16:30:40+08:00">2024-06-15</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h4><p>公司Legacy SSO使用场景已经很少， 逐步转向Azure ADB2C，员工常遗忘其Legacy SSO的密码，<br>由于企业Azure ADB2C申请比较麻烦，而且资产系统需求未必符合普适性，故自行搭建SSO服务<br>参考<a target="_blank" rel="noopener" href="https://www.cnblogs.com/selimsong/p/14328840.html">CNBlog:从零搭建一个IdentityServer</a></p>
<h4 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h4><p>对于从未接触过Legacy SSO的员工以及未来Legacy SSO废止的风险下，允许员工使用其工号或邮箱+密码或邮件验证码通过认证</p>
<ul>
<li>跳转到Identity Server使用工号或邮箱+密码认证</li>
<li>NG Client APP使用Identity Server授予的access token访问后台</li>
<li>忘记密码跳转到Identity Server使用邮箱验证码重置<br>进阶</li>
<li>将角色权限迁移至Identity Server<h4 id="is4"><a href="#is4" class="headerlink" title="is4"></a>is4</h4>identity server4 是作为OpenID Connect provider中间件 </li>
</ul>
<p>有限的免费： free for dev/testing/personal projects and companies or individuals making less than 1M USD gross annnual revenue</p>
<p>首先安装dotnet cli提供的identityserver模板<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dotnet new -i IdentityServer4.Templates</span><br></pre></td></tr></table></figure><br>提供了以下模板<br>IdentityServer4 with AdminUI                          is4admin<br>IdentityServer4 with ASP.NET Core Identity            is4aspid<br>IdentityServer4 Empty                                 is4empty<br>IdentityServer4 with Entity Framework Stores          is4ef<br>IdentityServer4 with In-Memory Stores and Test Users  is4inmem<br>IdentityServer4 Quickstart UI (UI assets only)        is4ui<br>入门：<br>入门项目包含三个部分，身份认证服务(<a target="_blank" rel="noopener" href="https://localhost:5001">https://localhost:5001</a>), API(<a target="_blank" rel="noopener" href="https://localhost:44323/identity">https://localhost:44323/identity</a>), Client(一个console program)</p>
<ol>
<li><p>创建身份认证服务</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">dotnet new is4empty -n IdentityServer</span><br><span class="line">cd ..</span><br><span class="line">dotnet new sln -n Quickstart</span><br><span class="line">dotnet sln add .\src\IdentityServer\IdentityServer.csproj</span><br></pre></td></tr></table></figure>
<p>在Config.cs中定义API scope</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">public static IEnumerable&lt;ApiScope&gt; ApiScopes &#x3D;&gt;</span><br><span class="line">        new ApiScope[]</span><br><span class="line">        &#123;</span><br><span class="line">            new ApiScope(&quot;api1&quot;, &quot;My API&quot;)</span><br><span class="line">        &#125;;</span><br></pre></td></tr></table></figure>
<p>在Config.cs中定义访问API的client</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">public static IEnumerable&lt;Client&gt; Clients &#x3D;&gt;</span><br><span class="line">        new Client[] </span><br><span class="line">        &#123;</span><br><span class="line">            new Client</span><br><span class="line">            &#123;</span><br><span class="line">                ClientId &#x3D; &quot;client&quot;,</span><br><span class="line">                ClientSecrets &#x3D;</span><br><span class="line">                &#123;</span><br><span class="line">                    new Secret(&quot;secrec&quot;.Sha256())</span><br><span class="line">                &#125;,</span><br><span class="line">                AllowedGrantTypes &#x3D; GrantTypes.ClientCredentials,</span><br><span class="line">                AllowedScopes &#x3D; &#123; &quot;api1&quot; &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br></pre></td></tr></table></figure>
<p>该client使用clientCredential(id+secret)认证 允许访问名为api1的scope<br>在startup.cs中载入资源以及client</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">public void ConfigureServices(IServiceCollection services)</span><br><span class="line">&#123;</span><br><span class="line">    var builder &#x3D; services.AddIdentityServer()</span><br><span class="line">        .AddDeveloperSigningCredential()  </span><br><span class="line">        .AddInMemoryApiScopes(Config.ApiScopes)</span><br><span class="line">        .AddInMemoryClients(Config.Clients);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>启动项目 导航到 <a target="_blank" rel="noopener" href="https://localhost:5001/.well-known/openid-configuration">https://localhost:5001/.well-known/openid-configuration</a></p>
</li>
<li><p>创建一个API, 并使用上面的IdentityServer作认证</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dotnet new webapi -n Api</span><br><span class="line">dotnet sln add .\Api\Api.csproj</span><br></pre></td></tr></table></figure>
<p>受保护的接口(protected interface)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[Route(&quot;identity&quot;)]</span><br><span class="line">[ApiController]</span><br><span class="line">[Authorize]</span><br><span class="line">public class IdentityController : ControllerBase</span><br><span class="line">&#123;</span><br><span class="line">    [HttpGet]</span><br><span class="line">    public IActionResult Get()</span><br><span class="line">    &#123;</span><br><span class="line">        return new JsonResult(from c in User.Claims select new &#123; c.Type, c.Value &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在startup.cs配置认证</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">public void ConfigureServices(IServiceCollection services)&#123;</span><br><span class="line">    ...</span><br><span class="line">    services.AddAuthentication(&quot;Bearer&quot;)</span><br><span class="line">    .AddJwtBearer(&quot;Bearer&quot;, options &#x3D;&gt; &#123;</span><br><span class="line">        options.Authority &#x3D; &quot;https:&#x2F;&#x2F;localhost:5001&quot;;</span><br><span class="line">        options.TokenValidationParameters &#x3D; new Microsoft.IdentityModel.Tokens.TokenValidationParameters</span><br><span class="line">        &#123;</span><br><span class="line">            ValidateAudience &#x3D; false</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public void Configure(IApplicationBuilder app, IWebHostEnvironment env)&#123;</span><br><span class="line">    ...</span><br><span class="line">    app.UseAuthentication();</span><br><span class="line">    app.UseAuthorization();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>写一个发请求的console program<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dotnet new console -n Client</span><br><span class="line">dotnet sln add .\Client\Client.csproj</span><br></pre></td></tr></table></figure>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">class Program</span><br><span class="line">&#123;</span><br><span class="line">    public static async Task Main(string[] args)</span><br><span class="line">    &#123;</span><br><span class="line">        var client &#x3D; new HttpClient();</span><br><span class="line">        var disco &#x3D; await client.GetDiscoveryDocumentAsync(&quot;https:&#x2F;&#x2F;localhost:5001&quot;);</span><br><span class="line">        if (disco.IsError)</span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(disco.Error);</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line">        var tokenResponse &#x3D; await client.RequestClientCredentialsTokenAsync(new ClientCredentialsTokenRequest</span><br><span class="line">        &#123;</span><br><span class="line">            Address &#x3D; disco.TokenEndpoint,</span><br><span class="line">            ClientId &#x3D; &quot;client&quot;,</span><br><span class="line">            ClientSecret &#x3D; &quot;secret&quot;,</span><br><span class="line">            Scope &#x3D; &quot;api1&quot;</span><br><span class="line">        &#125;);;</span><br><span class="line"></span><br><span class="line">        if (tokenResponse.IsError)</span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(tokenResponse.Error);</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Console.WriteLine(tokenResponse.Json);</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; call api</span><br><span class="line">        var apiClient &#x3D; new HttpClient();</span><br><span class="line">        apiClient.SetBearerToken(tokenResponse.AccessToken);</span><br><span class="line">        var response &#x3D; await apiClient.GetAsync(&quot;https:&#x2F;&#x2F;localhost:44323&#x2F;identity&quot;);</span><br><span class="line">        if (!response.IsSuccessStatusCode)</span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(response.StatusCode);</span><br><span class="line">        &#125;</span><br><span class="line">        else</span><br><span class="line">        &#123;</span><br><span class="line">            var content &#x3D; await response.Content.ReadAsStringAsync();</span><br><span class="line">            Console.WriteLine(JArray.Parse(content));</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在vs中右键solution在Properties中配置Multiple startup projects，确认后开始运行(F5)<br>右键Client project —&gt; Debug —&gt; start new instance 因为控制台程序执行后关闭 在Program中打断点</p>
<ol>
<li>认证之后是授权<br>配置API使用Policy<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">public void ConfigureServices(IServiceCollection services)&#123;</span><br><span class="line">    ...</span><br><span class="line">    services.AddAuthorization(options&#x3D;&gt; &#123;</span><br><span class="line">        options.AddPolicy(&quot;ApiScope&quot;, policy &#x3D;&gt;</span><br><span class="line">        &#123;</span><br><span class="line">            policy.RequireAuthenticatedUser();</span><br><span class="line">            policy.RequireClaim(&quot;scope&quot;, &quot;api1&quot;);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line">public void Configure(IApplicationBuilder app, IWebHostEnvironment env)&#123;</span><br><span class="line">    ...</span><br><span class="line">    app.UseEndpoints(endpoints &#x3D;&gt;</span><br><span class="line">    &#123;</span><br><span class="line">        endpoints.MapControllers()</span><br><span class="line">        .RequireAuthorization(&quot;ApiScope&quot;);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
进阶：</li>
<li>以上是使用写死的id+secret通过认证，下面加入交互UI<br>创建Mvc Client<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
配置认证</li>
<li><p>配置OpenId Connect</p>
<blockquote>
<p>Similar to OAuth 2.0, OpenID Connect also uses the scopes concept. Again, scopes represent something you want to protect and that clients want to access. In contrast to OAuth, scopes in OIDC don’t represent APIs, but identity data like user id, name or email address. </p>
</blockquote>
</li>
<li><p>在Identity Server注册Mvc Client</p>
</li>
</ol>
<h4 id="使用entity-framework库保存配置以及运行中数据"><a href="#使用entity-framework库保存配置以及运行中数据" class="headerlink" title="使用entity framework库保存配置以及运行中数据"></a>使用entity framework库保存配置以及运行中数据</h4><p>官方文档中基于上述Quickstart项目扩展，使前者In Memery的配置以及运行数据可以保存到数据库<br><a href="">github上的sample</a>与使用is4ef模板生成的项目有差别<br>download sample源码 在此基础上开发自己的需求 加入IConfiguration并从appsettings.json读取connectionstring</p>
<p>源码在startup中定义了一个InitializeDatabase方法 在第一次启动时执行以初始化SQL Server数据库 之后就把它注释掉</p>
<p>将我们的client写入到数据库配置<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO [dbo].[Clients]</span><br><span class="line">           ([Enabled]</span><br><span class="line">           ,[ClientId]</span><br><span class="line">           ,[ProtocolType]</span><br><span class="line">           ,[RequireClientSecret]</span><br><span class="line">           ,[ClientName]</span><br><span class="line">           ,[Description]</span><br><span class="line">           ,[ClientUri]</span><br><span class="line">           ,[LogoUri]</span><br><span class="line">           ,[RequireConsent]</span><br><span class="line">           ,[AllowRememberConsent]</span><br><span class="line">           ,[AlwaysIncludeUserClaimsInIdToken]</span><br><span class="line">           ,[RequirePkce]</span><br><span class="line">           ,[AllowPlainTextPkce]</span><br><span class="line">           ,[RequireRequestObject]</span><br><span class="line">           ,[AllowAccessTokensViaBrowser]</span><br><span class="line">           ,[FrontChannelLogoutUri]</span><br><span class="line">           ,[FrontChannelLogoutSessionRequired]</span><br><span class="line">           ,[BackChannelLogoutUri]</span><br><span class="line">           ,[BackChannelLogoutSessionRequired]</span><br><span class="line">           ,[AllowOfflineAccess]</span><br><span class="line">           ,[IdentityTokenLifetime]</span><br><span class="line">           ,[AllowedIdentityTokenSigningAlgorithms]</span><br><span class="line">           ,[AccessTokenLifetime]</span><br><span class="line">           ,[AuthorizationCodeLifetime]</span><br><span class="line">           ,[ConsentLifetime]</span><br><span class="line">           ,[AbsoluteRefreshTokenLifetime]</span><br><span class="line">           ,[SlidingRefreshTokenLifetime]</span><br><span class="line">           ,[RefreshTokenUsage]</span><br><span class="line">           ,[UpdateAccessTokenClaimsOnRefresh]</span><br><span class="line">           ,[RefreshTokenExpiration]</span><br><span class="line">           ,[AccessTokenType]</span><br><span class="line">           ,[EnableLocalLogin]</span><br><span class="line">           ,[IncludeJwtId]</span><br><span class="line">           ,[AlwaysSendClientClaims]</span><br><span class="line">           ,[ClientClaimsPrefix]</span><br><span class="line">           ,[PairWiseSubjectSalt]</span><br><span class="line">           ,[Created]</span><br><span class="line">           ,[Updated]</span><br><span class="line">           ,[LastAccessed]</span><br><span class="line">           ,[UserSsoLifetime]</span><br><span class="line">           ,[UserCodeType]</span><br><span class="line">           ,[DeviceCodeLifetime]</span><br><span class="line">           ,[NonEditable])</span><br><span class="line">     VALUES</span><br><span class="line">           (1</span><br><span class="line">           ,&#39;angular_spa&#39;</span><br><span class="line">           ,&#39;oidc&#39;</span><br><span class="line">           ,0</span><br><span class="line">           ,null</span><br><span class="line">           ,null</span><br><span class="line">           ,null</span><br><span class="line">           ,null</span><br><span class="line">           ,0</span><br><span class="line">           ,1</span><br><span class="line">           ,0</span><br><span class="line">           ,1</span><br><span class="line">           ,0</span><br><span class="line">           ,0</span><br><span class="line">           ,0</span><br><span class="line">           ,null</span><br><span class="line">           ,1</span><br><span class="line">           ,null</span><br><span class="line">           ,1</span><br><span class="line">           ,0</span><br><span class="line">           ,300</span><br><span class="line">           ,null</span><br><span class="line">           ,3600</span><br><span class="line">           ,300</span><br><span class="line">           ,null</span><br><span class="line">           ,2592000</span><br><span class="line">           ,1296000</span><br><span class="line">           ,1</span><br><span class="line">           ,0</span><br><span class="line">           ,1</span><br><span class="line">           ,0</span><br><span class="line">           ,1</span><br><span class="line">           ,1</span><br><span class="line">           ,0</span><br><span class="line">           ,&#39;client_&#39;</span><br><span class="line">           ,null</span><br><span class="line">           ,SYSDATETIME()</span><br><span class="line">           ,null</span><br><span class="line">           ,null</span><br><span class="line">           ,null</span><br><span class="line">           ,null</span><br><span class="line">           ,300</span><br><span class="line">           ,0)</span><br></pre></td></tr></table></figure><br>写入client scope<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO [dbo].[ClientScopes]</span><br><span class="line">           ([Scope]</span><br><span class="line">           ,[ClientId])</span><br><span class="line">     VALUES</span><br><span class="line">           (&#39;openid&#39;</span><br><span class="line">           ,3);</span><br><span class="line">		   INSERT INTO [dbo].[ClientScopes]</span><br><span class="line">           ([Scope]</span><br><span class="line">           ,[ClientId])</span><br><span class="line">     VALUES</span><br><span class="line">           (&#39;profile&#39;</span><br><span class="line">           ,3);</span><br><span class="line">		   INSERT INTO [dbo].[ClientScopes]</span><br><span class="line">           ([Scope]</span><br><span class="line">           ,[ClientId])</span><br><span class="line">     VALUES</span><br><span class="line">           (&#39;api1&#39;</span><br><span class="line">           ,3)</span><br></pre></td></tr></table></figure></p>
<p>client cors配置<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO [dbo].[ClientCorsOrigins]</span><br><span class="line">           ([Origin]</span><br><span class="line">           ,[ClientId])</span><br><span class="line">     VALUES</span><br><span class="line">           (&#39;http:&#x2F;&#x2F;localhost:4200&#39;</span><br><span class="line">           ,3)</span><br></pre></td></tr></table></figure><br>到这一步 angular spa 可以完成到identity server的跳转但是显示授权错误“Sorry, there was an error : unauthorized_client<br>Unknown client or client not enabled”<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">INSERT INTO [dbo].[ClientGrantTypes]</span><br><span class="line">           ([GrantType]</span><br><span class="line">           ,[ClientId])</span><br><span class="line">     VALUES</span><br><span class="line">           (&#39;implicit&#39;</span><br><span class="line">           ,3)</span><br><span class="line">GO</span><br></pre></td></tr></table></figure><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO [dbo].[ApiResources]</span><br><span class="line">           ([Enabled]</span><br><span class="line">           ,[Name]</span><br><span class="line">           ,[DisplayName]</span><br><span class="line">           ,[Description]</span><br><span class="line">           ,[AllowedAccessTokenSigningAlgorithms]</span><br><span class="line">           ,[ShowInDiscoveryDocument]</span><br><span class="line">           ,[Created]</span><br><span class="line">           ,[Updated]</span><br><span class="line">           ,[LastAccessed]</span><br><span class="line">           ,[NonEditable])</span><br><span class="line">     VALUES</span><br><span class="line">           (1</span><br><span class="line">           ,&#39;api1&#39;</span><br><span class="line">           ,&#39;AMS API&#39;</span><br><span class="line">           ,null</span><br><span class="line">           ,null</span><br><span class="line">           ,1</span><br><span class="line">           ,SYSDATETIME()</span><br><span class="line">           ,null</span><br><span class="line">           ,null</span><br><span class="line">           ,0)</span><br><span class="line">GO</span><br></pre></td></tr></table></figure><br>安装entityframework sqlserver依赖<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dotnet add package IdentityServer4.EntityFramework</span><br><span class="line">dotnet add package Microsoft.EntityFrameworkCore.SqlServer</span><br></pre></td></tr></table></figure></p>
<p>模板使用的是sqlitedb 见startup.cs<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">services..AddConfigurationStore(options &#x3D;&gt;</span><br><span class="line">&#123;</span><br><span class="line">    options.ConfigureDbContext &#x3D; builder &#x3D;&gt; builder.UseSqlite(connectionString);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<ul>
<li>ConfigurationDbContext  - 配置数据如 clients, resources, scopes</li>
<li>PersistedGrantDbContext - 临时处理数据如 authorization codes, refresh tokens</li>
</ul>
<p>用户数据库上下文<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dotnet ef migrations add InitUserContext -c AMSIS.Data.UserContext -o Data&#x2F;Migrations&#x2F;UserDb</span><br><span class="line">Update-Database -c AMSIS.Data.UserContext</span><br></pre></td></tr></table></figure></p>
<h4 id="login-logout-workflow-和-重定向"><a href="#login-logout-workflow-和-重定向" class="headerlink" title="login/logout workflow 和 重定向"></a>login/logout workflow 和 重定向</h4><p>当token无效时（比如后台校验jwt返回前台401）前台spa应跳转至登录页如 <a target="_blank" rel="noopener" href="http://localhost:44365/account/login?returnUri=http%3A//localhost%3A4200/passport/callback">http://localhost:44365/account/login?returnUri=http%3A//localhost%3A4200/passport/callback</a></p>
<p>spa应在路由到callback时从url中取得token存localstorage</p>
<h4 id="registry-workflow"><a href="#registry-workflow" class="headerlink" title="registry workflow"></a>registry workflow</h4><p>跳转到注册页 填表单 保存profile<br>应在业务领域分离出用户/账户信息 使用从identityserver取得的openid关联本业务领域数据</p>
<h4 id="返回包含自定义Claim的Profile"><a href="#返回包含自定义Claim的Profile" class="headerlink" title="返回包含自定义Claim的Profile"></a>返回包含自定义Claim的Profile</h4><h4 id="为自己的用户体系实现认证接口"><a href="#为自己的用户体系实现认证接口" class="headerlink" title="为自己的用户体系实现认证接口"></a>为自己的用户体系实现认证接口</h4><h4 id="部署到http"><a href="#部署到http" class="headerlink" title="部署到http"></a>部署到http</h4><p><a target="_blank" rel="noopener" href="https://www.likecs.com/show-306384005.html">lax cookie policy</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://qqstone.github.io/qqsnote/2021/09/23/DevOps-Database/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/qqsnote/images/avatar.gif">
      <meta itemprop="name" content="QQs">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="QQs'Note">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/qqsnote/2021/09/23/DevOps-Database/" class="post-title-link" itemprop="url">DevOps-Database</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-09-23 09:52:26" itemprop="dateCreated datePublished" datetime="2021-09-23T09:52:26+08:00">2021-09-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-04-16 20:11:32" itemprop="dateModified" datetime="2022-04-16T20:11:32+08:00">2022-04-16</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/qqsnote/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/" itemprop="url" rel="index"><span itemprop="name">数据库</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>参考<a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/1740904">数据迁移，不停机上线的正确姿势</a></p>
<h4 id="staging-slot-切换"><a href="#staging-slot-切换" class="headerlink" title="staging slot 切换"></a>staging slot 切换</h4><p>新建staging库，从旧数据库同步数据，同步数据结束后在空闲时段停服，将流量切换至新库</p>
<h4 id="不停机"><a href="#不停机" class="headerlink" title="不停机"></a>不停机</h4><ol>
<li>准备新库 表结构更新或分库分表操作</li>
<li>开启双写，服务端同时向新老两个库写入数据 此阶段需要联查历史数据进行写入的操作可以先查老数据库 再写入新库</li>
<li>双写过程中，开始历史数据迁移，将某一时间点的历史数据迁移到新库，迁移范围要覆盖到双写数据范围以避免数据遗漏</li>
<li>数据校验，确认没有遗漏 以及写入失败的个别情况</li>
<li>开启双读，流量逐步过渡到新库</li>
<li>关闭老库写功能</li>
<li>删除双写双读等业务无关逻辑</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://qqstone.github.io/qqsnote/2021/09/13/http/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/qqsnote/images/avatar.gif">
      <meta itemprop="name" content="QQs">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="QQs'Note">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/qqsnote/2021/09/13/http/" class="post-title-link" itemprop="url">HTTP</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-09-13 13:14:00" itemprop="dateCreated datePublished" datetime="2021-09-13T13:14:00+08:00">2021-09-13</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-03-02 20:11:18" itemprop="dateModified" datetime="2025-03-02T20:11:18+08:00">2025-03-02</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><img src="https://developer.mozilla.org/en-US/docs/Web/HTTP/Messages/httpmsgstructure2.png" alt=""></p>
<h4 id="Get和Post的区别"><a href="#Get和Post的区别" class="headerlink" title="Get和Post的区别"></a>Get和Post的区别</h4><p><img src="https://i0.wp.com/tvax1.sinaimg.cn/large/0032xJMSgy1guexb1cxwdj611i0o0tpb02.jpg" alt=""><br>总结：get 用于获取信息，无副作用，幂等，且可缓存。<br>post 用于修改服务器上的数据，有副作用，非幂等，不可缓存</p>
<blockquote>
<p>其实HTTP协议本身并没有对URL和BODY的长度限制，对URL限制的大多是浏览器和服务端自己限制的。</p>
<p>传参方式不受TCP传输限制 Get使用url Post使用Body的方式是约定俗成 服务端可自行制定规则从header或body获取参数</p>
</blockquote>
<h4 id="幂等性-Idempotence"><a href="#幂等性-Idempotence" class="headerlink" title="幂等性 (Idempotence)"></a>幂等性 (Idempotence)</h4><h4 id="Put-vs-Post"><a href="#Put-vs-Post" class="headerlink" title="Put vs Post"></a>Put vs Post</h4><h4 id="Data-URL"><a href="#Data-URL" class="headerlink" title="Data URL"></a>Data URL</h4><p>最初见于css插入图片资源 data协议数据格式形如<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">data:[&lt;mediatype&gt;][;base64],&lt;data&gt;</span><br></pre></td></tr></table></figure><br>其中mediatype 是个 MIME 类型的字符串，例如 ‘image/jpeg’ 表示 JPEG 图像文件。如果被省略，则默认值为 text/plain;charset=US-ASCII。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/qqsnote/page/10/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/qqsnote/">1</a><span class="space">&hellip;</span><a class="page-number" href="/qqsnote/page/10/">10</a><span class="page-number current">11</span><a class="page-number" href="/qqsnote/page/12/">12</a><span class="space">&hellip;</span><a class="page-number" href="/qqsnote/page/32/">32</a><a class="extend next" rel="next" href="/qqsnote/page/12/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">QQs</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/qqsnote/archives/">
        
          <span class="site-state-item-count">317</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/qqsnote/categories/">
        <span class="site-state-item-count">20</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/qqsnote/tags/">
        <span class="site-state-item-count">116</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



      </div>

      <div class="tag-cloud-tags">
        <a href="/qqsnote/tags/Net/" style="font-size: 30px; color: #fff">.Net</a> <a href="/qqsnote/tags/4G/" style="font-size: 12px; color: #ccc">4G</a> <a href="/qqsnote/tags/AI/" style="font-size: 21.82px; color: #e8e8e8">AI</a> <a href="/qqsnote/tags/Android/" style="font-size: 12px; color: #ccc">Android</a> <a href="/qqsnote/tags/Angular/" style="font-size: 30px; color: #fff">Angular</a> <a href="/qqsnote/tags/Apache/" style="font-size: 13.64px; color: #d1d1d1">Apache</a> <a href="/qqsnote/tags/Azure/" style="font-size: 26.73px; color: #f6f6f6">Azure</a> <a href="/qqsnote/tags/Babylon/" style="font-size: 12px; color: #ccc">Babylon</a> <a href="/qqsnote/tags/C/" style="font-size: 16.91px; color: #dadada">C#</a> <a href="/qqsnote/tags/C/" style="font-size: 16.91px; color: #dadada">C++</a> <a href="/qqsnote/tags/CSS/" style="font-size: 20.18px; color: #e3e3e3">CSS</a> <a href="/qqsnote/tags/DevOps/" style="font-size: 15.27px; color: #d5d5d5">DevOps</a> <a href="/qqsnote/tags/Docker/" style="font-size: 16.91px; color: #dadada">Docker</a> <a href="/qqsnote/tags/ES6/" style="font-size: 12px; color: #ccc">ES6</a> <a href="/qqsnote/tags/ESLint/" style="font-size: 12px; color: #ccc">ESLint</a> <a href="/qqsnote/tags/ElasticSearch/" style="font-size: 12px; color: #ccc">ElasticSearch</a> <a href="/qqsnote/tags/Electron/" style="font-size: 16.91px; color: #dadada">Electron</a> <a href="/qqsnote/tags/ElementUI/" style="font-size: 12px; color: #ccc">ElementUI</a> <a href="/qqsnote/tags/EntityFramework/" style="font-size: 13.64px; color: #d1d1d1">EntityFramework</a> <a href="/qqsnote/tags/Excel/" style="font-size: 12px; color: #ccc">Excel</a> <a href="/qqsnote/tags/FastDFS/" style="font-size: 12px; color: #ccc">FastDFS</a> <a href="/qqsnote/tags/Figma/" style="font-size: 12px; color: #ccc">Figma</a> <a href="/qqsnote/tags/Go/" style="font-size: 12px; color: #ccc">Go</a> <a href="/qqsnote/tags/GraphQL/" style="font-size: 12px; color: #ccc">GraphQL</a> <a href="/qqsnote/tags/Jasmine/" style="font-size: 12px; color: #ccc">Jasmine</a> <a href="/qqsnote/tags/Java/" style="font-size: 13.64px; color: #d1d1d1">Java</a> <a href="/qqsnote/tags/Jenkins/" style="font-size: 21.82px; color: #e8e8e8">Jenkins</a> <a href="/qqsnote/tags/Linux/" style="font-size: 23.45px; color: #ececec">Linux</a> <a href="/qqsnote/tags/MQ/" style="font-size: 12px; color: #ccc">MQ</a> <a href="/qqsnote/tags/Markdown/" style="font-size: 13.64px; color: #d1d1d1">Markdown</a> <a href="/qqsnote/tags/MongoDB/" style="font-size: 12px; color: #ccc">MongoDB</a> <a href="/qqsnote/tags/MySQL/" style="font-size: 12px; color: #ccc">MySQL</a> <a href="/qqsnote/tags/NSIS/" style="font-size: 12px; color: #ccc">NSIS</a> <a href="/qqsnote/tags/Nginx/" style="font-size: 12px; color: #ccc">Nginx</a> <a href="/qqsnote/tags/NoSQL/" style="font-size: 12px; color: #ccc">NoSQL</a> <a href="/qqsnote/tags/Node-js/" style="font-size: 18.55px; color: #dfdfdf">Node.js</a> <a href="/qqsnote/tags/OData/" style="font-size: 13.64px; color: #d1d1d1">OData</a> <a href="/qqsnote/tags/OpenCV/" style="font-size: 18.55px; color: #dfdfdf">OpenCV</a> <a href="/qqsnote/tags/PHP/" style="font-size: 12px; color: #ccc">PHP</a> <a href="/qqsnote/tags/PWA/" style="font-size: 12px; color: #ccc">PWA</a> <a href="/qqsnote/tags/Python/" style="font-size: 25.09px; color: #f1f1f1">Python</a> <a href="/qqsnote/tags/React/" style="font-size: 21.82px; color: #e8e8e8">React</a> <a href="/qqsnote/tags/SQL/" style="font-size: 12px; color: #ccc">SQL</a> <a href="/qqsnote/tags/SQL-Server/" style="font-size: 15.27px; color: #d5d5d5">SQL_Server</a> <a href="/qqsnote/tags/ServiceWorker/" style="font-size: 12px; color: #ccc">ServiceWorker</a> <a href="/qqsnote/tags/Shell/" style="font-size: 12px; color: #ccc">Shell</a> <a href="/qqsnote/tags/TypeScript/" style="font-size: 13.64px; color: #d1d1d1">TypeScript</a> <a href="/qqsnote/tags/UE/" style="font-size: 12px; color: #ccc">UE</a> <a href="/qqsnote/tags/UI/" style="font-size: 12px; color: #ccc">UI</a> <a href="/qqsnote/tags/UML/" style="font-size: 12px; color: #ccc">UML</a> <a href="/qqsnote/tags/Virtualbox/" style="font-size: 12px; color: #ccc">Virtualbox</a> <a href="/qqsnote/tags/WPF/" style="font-size: 12px; color: #ccc">WPF</a> <a href="/qqsnote/tags/WebGL/" style="font-size: 20.18px; color: #e3e3e3">WebGL</a> <a href="/qqsnote/tags/WebService/" style="font-size: 12px; color: #ccc">WebService</a> <a href="/qqsnote/tags/Web%E5%8D%8F%E8%AE%AE/" style="font-size: 12px; color: #ccc">Web协议</a> <a href="/qqsnote/tags/Web%E5%BC%80%E5%8F%91/" style="font-size: 26.73px; color: #f6f6f6">Web开发</a> <a href="/qqsnote/tags/Wechat/" style="font-size: 12px; color: #ccc">Wechat</a> <a href="/qqsnote/tags/object-Object/" style="font-size: 12px; color: #ccc">[object Object]</a> <a href="/qqsnote/tags/aigc/" style="font-size: 12px; color: #ccc">aigc</a> <a href="/qqsnote/tags/auth/" style="font-size: 12px; color: #ccc">auth</a> <a href="/qqsnote/tags/axios/" style="font-size: 12px; color: #ccc">axios</a> <a href="/qqsnote/tags/canvas/" style="font-size: 12px; color: #ccc">canvas</a> <a href="/qqsnote/tags/css/" style="font-size: 12px; color: #ccc">css</a> <a href="/qqsnote/tags/express/" style="font-size: 12px; color: #ccc">express</a> <a href="/qqsnote/tags/ftp/" style="font-size: 12px; color: #ccc">ftp</a> <a href="/qqsnote/tags/git/" style="font-size: 13.64px; color: #d1d1d1">git</a> <a href="/qqsnote/tags/hexo/" style="font-size: 12px; color: #ccc">hexo</a> <a href="/qqsnote/tags/http/" style="font-size: 12px; color: #ccc">http</a> <a href="/qqsnote/tags/https/" style="font-size: 12px; color: #ccc">https</a> <a href="/qqsnote/tags/ionic/" style="font-size: 12px; color: #ccc">ionic</a> <a href="/qqsnote/tags/javascript/" style="font-size: 28.36px; color: #fafafa">javascript</a> <a href="/qqsnote/tags/k8s/" style="font-size: 12px; color: #ccc">k8s</a> <a href="/qqsnote/tags/login/" style="font-size: 12px; color: #ccc">login</a> <a href="/qqsnote/tags/loopback/" style="font-size: 12px; color: #ccc">loopback</a> <a href="/qqsnote/tags/npm/" style="font-size: 12px; color: #ccc">npm</a> <a href="/qqsnote/tags/nsis/" style="font-size: 13.64px; color: #d1d1d1">nsis</a> <a href="/qqsnote/tags/redis/" style="font-size: 12px; color: #ccc">redis</a> <a href="/qqsnote/tags/sqlServer/" style="font-size: 12px; color: #ccc">sqlServer</a> <a href="/qqsnote/tags/ssh/" style="font-size: 12px; color: #ccc">ssh</a> <a href="/qqsnote/tags/svg/" style="font-size: 12px; color: #ccc">svg</a> <a href="/qqsnote/tags/vtk/" style="font-size: 16.91px; color: #dadada">vtk</a> <a href="/qqsnote/tags/vuejs/" style="font-size: 16.91px; color: #dadada">vuejs</a> <a href="/qqsnote/tags/webassembly/" style="font-size: 13.64px; color: #d1d1d1">webassembly</a> <a href="/qqsnote/tags/webpack/" style="font-size: 12px; color: #ccc">webpack</a> <a href="/qqsnote/tags/websocket/" style="font-size: 12px; color: #ccc">websocket</a> <a href="/qqsnote/tags/windows/" style="font-size: 12px; color: #ccc">windows</a> <a href="/qqsnote/tags/yarn/" style="font-size: 12px; color: #ccc">yarn</a> <a href="/qqsnote/tags/%E4%B8%8A%E4%BC%A0/" style="font-size: 12px; color: #ccc">上传</a> <a href="/qqsnote/tags/%E5%8A%A0%E5%AF%86/" style="font-size: 16.91px; color: #dadada">加密</a> <a href="/qqsnote/tags/%E5%8C%BB%E5%AD%A6%E5%9B%BE%E5%83%8F/" style="font-size: 12px; color: #ccc">医学图像</a> <a href="/qqsnote/tags/%E5%8D%8F%E8%AE%AE%E5%92%8C%E8%A7%84%E8%8C%83/" style="font-size: 12px; color: #ccc">协议和规范</a> <a href="/qqsnote/tags/%E5%8D%9A%E5%BC%88%E8%AE%BA/" style="font-size: 12px; color: #ccc">博弈论</a> <a href="/qqsnote/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/" style="font-size: 13.64px; color: #d1d1d1">图像处理</a> <a href="/qqsnote/tags/%E5%A4%9A%E8%AF%AD%E8%A8%80/" style="font-size: 13.64px; color: #d1d1d1">多语言</a> <a href="/qqsnote/tags/%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B/" style="font-size: 12px; color: #ccc">存储过程</a> <a href="/qqsnote/tags/%E6%80%A7%E8%83%BD/" style="font-size: 12px; color: #ccc">性能</a> <a href="/qqsnote/tags/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/" style="font-size: 12px; color: #ccc">性能优化</a> <a href="/qqsnote/tags/%E6%88%90%E9%95%BF%E6%80%9D%E7%BB%B4/" style="font-size: 12px; color: #ccc">成长思维</a> <a href="/qqsnote/tags/%E6%91%84%E5%BD%B1/" style="font-size: 12px; color: #ccc">摄影</a> <a href="/qqsnote/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" style="font-size: 12px; color: #ccc">操作系统</a> <a href="/qqsnote/tags/%E6%95%B0%E5%AD%97%E7%AD%BE%E5%90%8D/" style="font-size: 12px; color: #ccc">数字签名</a> <a href="/qqsnote/tags/%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96/" style="font-size: 12px; color: #ccc">数据可视化</a> <a href="/qqsnote/tags/%E6%95%B0%E6%8D%AE%E5%BA%93%E9%94%81/" style="font-size: 12px; color: #ccc">数据库锁</a> <a href="/qqsnote/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/" style="font-size: 12px; color: #ccc">树莓派</a> <a href="/qqsnote/tags/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" style="font-size: 12px; color: #ccc">正则表达式</a> <a href="/qqsnote/tags/%E7%89%A9%E8%81%94%E7%BD%91/" style="font-size: 12px; color: #ccc">物联网</a> <a href="/qqsnote/tags/%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F/" style="font-size: 13.64px; color: #d1d1d1">环境变量</a> <a href="/qqsnote/tags/%E7%AE%97%E6%B3%95/" style="font-size: 15.27px; color: #d5d5d5">算法</a> <a href="/qqsnote/tags/%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83/" style="font-size: 12px; color: #ccc">编码规范</a> <a href="/qqsnote/tags/%E8%A7%86%E9%A2%91%E6%B5%81/" style="font-size: 12px; color: #ccc">视频流</a> <a href="/qqsnote/tags/%E8%A7%A6%E5%8F%91%E5%99%A8/" style="font-size: 12px; color: #ccc">触发器</a> <a href="/qqsnote/tags/%E8%AE%A4%E8%AF%81-%E6%8E%88%E6%9D%83/" style="font-size: 21.82px; color: #e8e8e8">认证&授权</a> <a href="/qqsnote/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" style="font-size: 12px; color: #ccc">设计模式</a> <a href="/qqsnote/tags/%E8%AF%BB%E4%B9%A6/" style="font-size: 12px; color: #ccc">读书</a> <a href="/qqsnote/tags/%E8%BF%9B%E7%A8%8B%E5%AE%88%E6%8A%A4/" style="font-size: 12px; color: #ccc">进程守护</a> <a href="/qqsnote/tags/%E9%9D%A2%E8%AF%95/" style="font-size: 13.64px; color: #d1d1d1">面试</a>
      </div>
    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">QQs</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/qqsnote/lib/anime.min.js"></script>
  <script src="/qqsnote/lib/velocity/velocity.min.js"></script>
  <script src="/qqsnote/lib/velocity/velocity.ui.min.js"></script>

<script src="/qqsnote/js/utils.js"></script>

<script src="/qqsnote/js/motion.js"></script>


<script src="/qqsnote/js/schemes/muse.js"></script>


<script src="/qqsnote/js/next-boot.js"></script>




  















  

  

  

</body>
</html>
